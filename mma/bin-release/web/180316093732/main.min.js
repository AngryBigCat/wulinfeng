function shareOkClose(){shareObj&&shareObj.parent&&(shareObj.closeAni?shareObj.closeAni():Lgs.LremoveChild(shareObj))}var __reflect=this&&this.__reflect||function(e,t,a){e.__class__=t,a?a.push(t):a=[t],e.__types__=e.__types__?a.concat(e.__types__):a},__extends=this&&this.__extends||function(e,t){function a(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)},loadingScreen,initScale=gh/1206,GameLayer,myImg,IsQRloadComplete=!1,LMsgArr=[],oldLMsgArr=[],Lgs;!function(e){function t(e){var t=JSON.stringify(e),a=new egret.ByteArray;a.writeUTFBytes(t);var i=egret.Base64Util.encode(a.buffer);return i}function a(e){var t=egret.Base64Util.decode(e),a=new egret.ByteArray(t);return a.position=0,a.readUTFBytes(a.length)}function i(e,t,a){if(0==oldLMsgArr.length){var i=new egret.Sprite;$gameStage.addChild(i);var r=new egret.Sprite;i.addChild(r);var n=new egret.TextField;T(n,.028,16777215),n.text=e,n.stroke=4,n.bold=!0,n.strokeColor=1118481,n.textAlign="center",n.width=.38*gh,r.addChild(n),i.tsText=n,i.x=gw/2-c(i)/2,i.y=.38*gh;var h=i.y;i.alpha=0,LMsgArr.push(i),egret.Tween.get(i).wait(280).to({y:h-.05*gh},2e3,egret.Ease.quadOut),egret.Tween.get(i).to({alpha:1},280).wait(1700).to({alpha:0},300,egret.Ease.quadOut).call(function(){i.visible=!1,LMsgArr.splice(0,1),oldLMsgArr.push(i)},this)}else{var g=oldLMsgArr[0];oldLMsgArr.splice(0,1),LMsgArr.push(g),g.tsText.text=e,g.x=gw/2-c(g)/2,g.y=.38*gh;var h=g.y;g.alpha=0,g.visible=!0,egret.Tween.get(g).wait(280).to({y:h-.05*gh},2e3,egret.Ease.quadOut),egret.Tween.get(g).to({alpha:1},280).wait(1700).to({alpha:0},300,egret.Ease.quadOut).call(function(){LMsgArr.splice(0,1),oldLMsgArr.push(g)},this)}egret.setTimeout(function(){t&&t.call(a)},this,800)}function r(e){e||(e=""),loadingScreen.loadingShow(e)}function n(){loadingScreen.loadingHide()}function h(e,t,a){function i(){x.alpha=.7}function r(){x.alpha=.9}var n=new egret.Sprite;$gameStage.addChild(n),n.touchEnabled=!0;var h=v(0,.4,[0,0,dw,dh]);n.addChild(h);var o=new egret.Sprite;n.addChild(o);var s=.38*gh,l=.38*gh+.08*gh,d=new egret.TextField;T(d,.0225*gh/gh,2236962),d.width=s,d.textAlign="center",d.lineSpacing=.01*gh,d.text=e+"",d.x=l/2-c(d)/2,d.y=.04*gh;var u=p(d)+.08*gh,m=new egret.Shape;o.addChild(m),m.graphics.beginFill(16777215),m.graphics.drawRect(0,0,l,u),m.graphics.endFill();var y=new egret.Shape;o.addChild(y),y.graphics.beginFill(16777215),y.graphics.drawRoundRect(0,0,l,u+.075*gh,.04*gh),y.graphics.endFill(),y.alpha=.9,y.mask=m,o.addChild(d),o.x=gw/2-c(o)/2,o.y=.5*gh-p(o)/2-.045*gh;var w=new egret.Shape;o.addChild(w),w.graphics.beginFill(0),w.graphics.drawRoundRect(0,0,l,u+.07*gh,.04*gh),w.graphics.endFill();var x=new egret.Shape;o.addChild(x),x.graphics.beginFill(16316664),x.graphics.drawRect(0,u,l,.07*gh),x.graphics.endFill(),x.alpha=.9,x.mask=w;var f=new egret.Shape;o.addChild(f),f.alpha=.9,f.graphics.lineStyle(2,16777215,.4),f.graphics.moveTo(y.x+2,u),f.graphics.lineTo(y.x+.1*c(o),u),f.graphics.moveTo(y.x+.9*c(o),u),f.graphics.lineTo(y.x+c(o)-2,u),f.graphics.lineStyle(2,4473924,.4),f.graphics.moveTo(y.x+.1*c(o),u),f.graphics.lineTo(y.x+.9*c(o),u);var E=new egret.TextField;o.addChild(E),E.text="OK",T(E,.028*gh/gh,1278974),E.width=s,E.textAlign="center",E.x=l/2-c(E)/2,E.y=u+.0225*gh,x.touchEnabled=!0,x.addEventListener(egret.TouchEvent.TOUCH_BEGIN,i,$gameStage),n.addEventListener(egret.TouchEvent.TOUCH_END,r,$gameStage),x.once(egret.TouchEvent.TOUCH_TAP,function(){x.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,i,$gameStage),n.removeEventListener(egret.TouchEvent.TOUCH_END,r,$gameStage),g(n),t&&t.call(a)},$gameStage)}function g(e){e.parent&&!e.parent.removeChild&&console.log(e.parent),null!=e.parent&&null!=e&&e.parent.removeChild(e)}function o(e,t,a,i){e.once(egret.Event.REMOVED_FROM_STAGE,function(){e.removeEventListener(t,a,i)},i)}function s(e){e.once(egret.Event.REMOVED_FROM_STAGE,function(){egret.Tween.removeTweens(e)},e)}function l(e,t,a,i,r){function n(t){t.type==egret.TouchEvent.TOUCH_BEGIN&&(s.downFun.call(l.downObj,t),d=!0,u=e.obj.x-t.stageX,v=e.obj.y-t.stageY,e.moveStage.addEventListener(egret.TouchEvent.TOUCH_MOVE,h,e.callStage))}function h(t){if(t.type==egret.TouchEvent.TOUCH_MOVE&&d){s.moveFun.call(l.moveObj,t);var a=t.stageX+u,n=t.stageY+v;a=Math.max(pw_sx-.02*gh+e.obj.anchorOffsetX*e.obj.scaleX,a),a=Math.min(gw-pw_sx+.02*gh-(c(e.obj)-e.obj.anchorOffsetX*e.obj.scaleX),a),n=Math.max(.02*-gh+e.obj.anchorOffsetY*e.obj.scaleY,n),n=Math.min(gh-p(e.obj)/2+e.obj.anchorOffsetY*e.obj.scaleY,n),i?"x"==i?(e.obj.x=a,r&&(e.obj.x<gw/2+r[0]?e.obj.x=gw/2+r[0]:e.obj.x>gw/2+r[1]&&(e.obj.x=gw/2+r[1]))):"y"==i&&(e.obj.y=n,r&&(e.obj.y<r[0]?e.obj.x=r[0]:e.obj.x>r[1]&&(e.obj.x=r[1]))):(e.obj.x=a,e.obj.y=n)}}function g(t){s.upFun.call(l.upObj,t),d=!1,e.moveStage.removeEventListener(egret.TouchEvent.TOUCH_MOVE,h,e.callStage)}var s={downFun:function(e,t){},moveFun:function(e,t){},upFun:function(e,t){}},l={downObj:e.callStage,moveObj:e.callStage,upObj:e.callStage};t&&(s=t),a&&(l=a);var d=!1,u=0,v=0;e.stage.touchEnabled=!0,e.moveStage.touchEnabled=!0,e.stage.addEventListener(egret.TouchEvent.TOUCH_BEGIN,n,e.callStage),e.stage.addEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,g,e.callStage),e.stage.addEventListener(egret.TouchEvent.TOUCH_END,g,e.callStage),o(e.stage,egret.TouchEvent.TOUCH_BEGIN,n,e.callStage),o(e.stage,egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,g,e.callStage),o(e.stage,egret.TouchEvent.TOUCH_END,g,e.callStage),o(e.moveStage,egret.TouchEvent.TOUCH_MOVE,h,e.callStage),e.obj.removeDrag=function(){e.stage.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,n,e.callStage),e.stage.removeEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,g,e.callStage),e.stage.removeEventListener(egret.TouchEvent.TOUCH_END,g,e.callStage),e.moveStage.removeEventListener(egret.TouchEvent.TOUCH_MOVE,h,e.callStage)},e.obj.addDrag=function(){e.stage.addEventListener(egret.TouchEvent.TOUCH_BEGIN,n,e.callStage),e.stage.addEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,g,e.callStage),e.stage.addEventListener(egret.TouchEvent.TOUCH_END,g,e.callStage)}}function d(e,t,a,i,r,n,h){function g(){if(w&&e.obj.x!=x){if(n){if("x"==n){var t=B(e.obj.x,e.obj.y,x-e.obj.x,0,r);e.obj.x<x&&e.obj.x+t.a2<=x||e.obj.x>x&&e.obj.x+t.a2>=x?e.obj.x=t.x:e.obj.x=x}else if("y"==n){var t=B(e.obj.x,e.obj.y,0,f-e.obj.y,r);e.obj.y<f&&e.obj.y+t.b2<=f||e.obj.y>f&&e.obj.y+t.b2>=f?e.obj.y=t.y:e.obj.y=f}}else{var t=B(e.obj.x,e.obj.y,x-e.obj.x,f-e.obj.y,r);e.obj.x<x&&e.obj.x+t.a2<=x||e.obj.x>x&&e.obj.x+t.a2>=x?e.obj.x=t.x:e.obj.x=x,e.obj.y<f&&e.obj.y+t.b2<=f||e.obj.y>f&&e.obj.y+t.b2>=f?e.obj.y=t.y:e.obj.y=f}a.call(e.callStage)}}function s(a){a.type==egret.TouchEvent.TOUCH_BEGIN&&(T=!0,x=a.stageX,f=a.stageY,x=Math.max(x,u+e.obj.anchorOffsetX),x=Math.min(x,v+e.obj.anchorOffsetX-c(e.obj)),f=Math.max(f,m+e.obj.anchorOffsetY),f=Math.min(f,y+e.obj.anchorOffsetY-p(e.obj)),w=!0,e.moveStage.addEventListener(egret.TouchEvent.TOUCH_MOVE,l,e.callStage),t.call(e.callStage))}function l(t){t.type==egret.TouchEvent.TOUCH_MOVE&&T&&(x=t.stageX,f=t.stageY,x=Math.max(x,u+e.obj.anchorOffsetX),x=Math.min(x,v+e.obj.anchorOffsetX-c(e.obj)),f=Math.max(f,m+e.obj.anchorOffsetY),f=Math.min(f,y+e.obj.anchorOffsetY-p(e.obj)))}function d(t){T=!1,e.moveStage.removeEventListener(egret.TouchEvent.TOUCH_MOVE,l,e.callStage),i.call(e.callStage)}var u=0,v=0,m=gw,y=gw;h&&("x"==n?(u=h[0],v=h[1]):"y"==n?(m=h[0],y=h[1]):(u=h[0],v=h[1],m=h[2],y=h[3]));var w=!1,T=!1,x=0,f=0;e.stage.touchEnabled=!0,e.moveStage.touchEnabled=!0,e.stage.addEventListener(egret.TouchEvent.TOUCH_BEGIN,s,e.callStage),e.stage.addEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,d,e.callStage),e.stage.addEventListener(egret.TouchEvent.TOUCH_END,d,e.callStage),o(e.stage,egret.TouchEvent.TOUCH_BEGIN,s,e.callStage),o(e.stage,egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,d,e.callStage),o(e.stage,egret.TouchEvent.TOUCH_END,d,e.callStage),o(e.moveStage,egret.TouchEvent.TOUCH_MOVE,l,e.callStage),e.obj.addEventListener(egret.Event.ENTER_FRAME,g,e.callStage),o(e.obj,egret.Event.ENTER_FRAME,g,e.callStage),e.obj.removePull=function(){e.stage.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,s,e.callStage),e.stage.removeEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,d,e.callStage),e.stage.removeEventListener(egret.TouchEvent.TOUCH_END,d,e.callStage),e.moveStage.removeEventListener(egret.TouchEvent.TOUCH_MOVE,l,e.callStage),e.obj.removeEventListener(egret.Event.ENTER_FRAME,g,e.callStage)},e.obj.addPull=function(){e.stage.addEventListener(egret.TouchEvent.TOUCH_BEGIN,s,e.callStage),e.stage.addEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,d,e.callStage),e.stage.addEventListener(egret.TouchEvent.TOUCH_END,d,e.callStage),e.obj.addEventListener(egret.Event.ENTER_FRAME,g,e.callStage)}}function c(e,t){var a=e.width*e.scaleX;return t||(a=Math.abs(e.width*e.scaleX)),a}function p(e,t){var a=e.height*e.scaleY;return t||(a=Math.abs(e.height*e.scaleY)),a}function u(e,t,a){var i=new egret.Bitmap,r=RES.getRes(e);if(i.texture=r,i.scaleX=i.scaleY=initScale,"bg"==t&&(i.x=gw/2-c(i)/2,i.y=gh/2-p(i)/2),a){if(c(i)>dw){var n=new egret.RenderTexture;n.drawToTexture(i,new egret.Rectangle((c(i)-dw)/2,0,dw,p(i))),i.texture=n}if(p(i)>dh){var n=new egret.RenderTexture;n.drawToTexture(i,new egret.Rectangle(0,(p(i)-dh)/2,c(i),dh)),i.texture=n}}return i}function v(e,t,a){var i=new egret.Shape;return i.graphics.beginFill(e),a?i.graphics.drawRect(a[0],a[1],a[2],a[3]):i.graphics.drawRect(0,(gh-dh)/2,dw,dh),i.graphics.endFill(),i.alpha=t,i}function m(e,t,a,i,r,n,h,g){RES.getResByUrl(r,function(i){var r;r=i?new egret.Bitmap(i):u("noheadimg_jpg"),y(r,a/gh),n&&"headImg"==n&&r.width>r.height&&w(r,(a+2)/gh,"x"),r.anchorOffsetX=r.width/2,r.anchorOffsetY=r.height/2,r.x=e+c(r)/2,r.y=t+p(r)/2,this.addChild(r),this.dispatchEventWith("imgOk"),h&&h.call(g,r)},i,RES.ResourceItem.TYPE_IMAGE)}function y(e,t){e&&e.height&&(e.scaleX=e.scaleY=gh*t/e.height)}function w(e,t,a){switch(a){case"x":e.scaleX=gh*t/e.width;break;case"y":e.scaleY=gh*t/e.height;break;case"_x":e.scaleX=e.scaleY=gh*t/e.width;break;case"_y":e.scaleX=e.scaleY=gh*t/e.width}}function T(e,t,a,i){var r=new egret.TextField;if((a||0==a)&&(e.textColor=a),i?e.fontFamily=i:e.fontFamily="sans-serif",r.fontFamily=e.fontFamily,r.text="Mrz默认值qgy",r.text&&0!=r.height){for(;r.height<gh*t;)r.size++;for(;r.height>gh*t;)r.size--}e.size=r.size}function x(e,t,a){var i=new egret.TextField;if(i.fontFamily=e.fontFamily,i.text=t,i.size=e.size,i.text&&0!=i.width)for(;i.width>gh*a;)i.size--;e.size=i.size}function f(e,t,a,i,r){function n(e,t,a){return document.getElementById("QR").complete?(E(e,t,a),!0):!1}gameDiv=document.getElementsByClassName("egret-player")[0],$("#QR").attr("src")?myImg.style.display="none":(myImg=document.createElement("img"),myImg.style.display="none"),r?myImg.src=r:myImg.src=$staticUrl+"resource/assets/GameUtil/QR.png",myImg.id="QR",gameDiv.appendChild(myImg);var h=egret.setInterval(function(){IsQRloadComplete=n(e,t,a),i?myImg.style.display="block":myImg.style.display="none",IsQRloadComplete&&egret.clearInterval(h)},this,33)}function E(e,t,a,i){var r=myImg.width/myImg.height;myImg.style.height=a;var n=a.replace("%","")/100,h=n*window.innerHeight*r;myImg.style.width=h+"px";var g=window.innerWidth/2-h/2+window.innerHeight*e,o=window.innerHeight*t;myImg.style.left=g+"px",myImg.style.top=o+"px",myImg.style.position="absolute",i?myImg.style.display="block":myImg.style.display="none"}function _(){myImg.style.display="none"}function C(e,t){function a(e){var t=e.currentTarget;egret.Tween.get(t).to({scaleX:.9*i,scaleY:.9*i},100,egret.Ease.backOut).to({scaleX:i,scaleY:i},250,egret.Ease.backOut)}var i=e.scaleX;e.anchorOffsetX=e.width/2,e.anchorOffsetY=e.height/2,e.x=e.x+c(e)/2,e.y=e.y+p(e)/2,t||(e.touchEnabled=!0,e.addEventListener(egret.TouchEvent.TOUCH_BEGIN,a,this),o(e,egret.TouchEvent.TOUCH_BEGIN,a,this))}function S(e,t){function a(e){var t=e.currentTarget;egret.Tween.get(t).to({scaleX:.9*i,scaleY:.9*i},100,egret.Ease.backOut).to({scaleX:i,scaleY:i},250,egret.Ease.backOut)}var i=e.scaleX;t||(e.touchEnabled=!0,e.addEventListener(egret.TouchEvent.TOUCH_BEGIN,a,this),o(e,egret.TouchEvent.TOUCH_BEGIN,a,this))}function L(e,t,a){var i=Math.atan2(e,t),r=Math.sin(i),n=Math.cos(i),h=a*r,g=a*n;return{x:h,y:g}}function b(e,t,a,i){var r=Math.sin(e),n=Math.cos(e),h=t*r,g=t*n,o=a+h,s=i+g;return{a2:h,b2:g,x:o,y:s}}function B(e,t,a,i,r){var n=Math.atan2(a,i),h=Math.sin(n),g=Math.cos(n),o=r*h,s=r*g,l=e+o,d=t+s;return{a2:o,b2:s,x:l,y:d}}function O(e,t,a){return a*a>=e*e+t*t?!0:!1}function G(e){var t=e,a=Math.floor(t/60/60),i=Math.floor(t/60)%60,r=Math.floor(t)%60;10>a&&(a="0"+a),10>i&&(i="0"+i),10>r&&(r="0"+r);var n=a+":"+i+":"+r;return n}function R(e,t,a,i){function r(){E.alpha=.7}function n(){E.alpha=.9}function h(){S.alpha=.7}function g(){S.alpha=.9}var o=new egret.Sprite;GameLayer.addChild(o),o.touchEnabled=!0;var s=v(0,.4,[0,0,dw,dh]);o.addChild(s);var l=new egret.Sprite;o.addChild(l);var d=.38*gh,u=.38*gh+.08*gh,m=new egret.TextField;T(m,.0225*gh/gh,2236962),m.width=d,m.textAlign="center",m.lineSpacing=.01*gh,m.text=e,m.x=u/2-c(m)/2,m.y=.04*gh;var y=p(m)+.08*gh,w=new egret.Shape;l.addChild(w),w.graphics.beginFill(16777215),w.graphics.drawRect(0,0,c(m)+.08*gh,y),w.graphics.endFill();var x=new egret.Shape;l.addChild(x),x.graphics.beginFill(16777215),x.graphics.drawRoundRect(0,0,c(m)+.08*gh,y+.075*gh,.04*gh),x.graphics.endFill(),x.alpha=.9,x.mask=w,l.addChild(m),l.x=gw/2-c(l)/2,l.y=.5*gh-p(l)/2-.045*gh;var f=new egret.Shape;l.addChild(f),f.graphics.beginFill(0),f.graphics.drawRoundRect(0,0,c(m)+.08*gh,y+.07*gh,.04*gh),f.graphics.endFill();var E=new egret.Shape;l.addChild(E),E.graphics.beginFill(16316664),E.graphics.drawRect(0,y,c(m)/2+.04*gh,.07*gh),E.graphics.endFill(),E.alpha=.9,E.mask=f;var _=new egret.TextField;l.addChild(_),T(_,.028*gh/gh,1278974),_.text="是",_.width=d/2,_.textAlign="center",_.x=c(E)/2-c(_)/2,_.y=y+.0225*gh;var C=new egret.Shape;l.addChild(C),C.graphics.beginFill(0),C.graphics.drawRoundRect(0,0,c(m)+.08*gh,y+.07*gh,.04*gh),C.graphics.endFill();var S=new egret.Shape;l.addChild(S),S.graphics.beginFill(16316664),S.graphics.drawRect(c(m)/2+.04*gh,y,c(m)/2+.04*gh,.07*gh),S.graphics.endFill(),S.alpha=.9,S.mask=C;var L=new egret.TextField;l.addChild(L),T(L,.028*gh/gh,1278974),L.text="否",L.width=d/2,L.textAlign="center",L.x=c(E)+c(S)/2-c(L)/2,L.y=y+.0225*gh;var b=new egret.Shape;l.addChild(b),b.alpha=.9,b.graphics.lineStyle(2,16777215,.4),b.graphics.moveTo(x.x+2,y),b.graphics.lineTo(x.x+.1*c(l),y),b.graphics.moveTo(x.x+.9*c(l),y),b.graphics.lineTo(x.x+c(l)-2,y),b.graphics.lineStyle(2,10066329,.4),b.graphics.moveTo(x.x+.1*c(l),y),b.graphics.lineTo(x.x+.9*c(l),y);var B=new egret.Shape;l.addChild(B),B.alpha=.9,B.graphics.lineStyle(3,16777215,.4),B.graphics.moveTo(u/2,y+3),B.graphics.lineTo(u/2,y+.07*gh-3),E.touchEnabled=!0,E.addEventListener(egret.TouchEvent.TOUCH_BEGIN,r,GameLayer),o.addEventListener(egret.TouchEvent.TOUCH_END,n,GameLayer),E.once(egret.TouchEvent.TOUCH_TAP,function(){E.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,r,GameLayer),o.removeEventListener(egret.TouchEvent.TOUCH_END,n,GameLayer),GameLayer.removeChild(o),t&&t.call(i)},GameLayer),S.touchEnabled=!0,S.addEventListener(egret.TouchEvent.TOUCH_BEGIN,h,GameLayer),o.addEventListener(egret.TouchEvent.TOUCH_END,g,GameLayer),S.once(egret.TouchEvent.TOUCH_TAP,function(){S.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,h,GameLayer),o.removeEventListener(egret.TouchEvent.TOUCH_END,g,GameLayer),GameLayer.removeChild(o),a&&a.call(i)},GameLayer)}function M(e){return"number"==typeof e&&e%1===0}function A(e,t,a,i,r){var n=e+"",h=n.length,g=0,o="",s=egret.setInterval(function(){h>g?(g++,o=g%2==1?n.substring(0,g):n.substring(0,g)+"_"):(egret.clearInterval(s),o=n.substring(0,g),i&&i.call(this)),a.call(this,o)},r,t)}function N(e,t,a,i,r,n){var h=new egret.Shape,g=0,o=0,s=egret.Point.distance(a,i);h.x=a.x,h.y=a.y;var l=new egret.Point(0,0),d=new egret.Point(i.x-a.x,i.y-a.y);h.graphics.lineStyle(t,e),h.graphics.moveTo(l.x,l.y);for(var c={x:l.x,y:l.y};s>o;)g%2==0?(c=B(c.x,c.y,d.x,d.y,r),o+=r,h.graphics.lineTo(c.x,c.y)):(c=B(c.x,c.y,d.x,d.y,n),o+=n,h.graphics.moveTo(c.x,c.y)),g++;return h.graphics.endFill(),h}function k(e,t,a,i){var r=new egret.Shape;return r.graphics.lineStyle(t,e),r.graphics.moveTo(0,0),r.graphics.lineTo(i.x-a.x,i.y-a.y),r.graphics.endFill(),r.x=a.x,r.y=a.y,r}e.encbase64=t,e.decbase64=a,e.LMsg=i,e.showloading=r,e.hideloading=n,e.LAlert=h,e.LremoveChild=g,e.removedListener=o,e.removedTweens=s,e.DragFun=l,e.PullFun=d,e.GetWidth=c,e.GetHeight=p,e.createBitmapByName=u,e.makeaShape=v,e.addBitmapByUrl=m,e.scaleFun=y,e.scaleFunStr=w,e.textScaleFun=T,e.textScaleXFun=x,e.addQR=f,e.setQRposition=E,e.removeQR=_,e.BtnMode=C,e.BtnModeArcShape=S,e.xyFun=L,e.xyFun2=b,e.xyFun3=B,e.zFun=O,e.hmsFun=G,e.LAlert2=R,e.isInteger=M,e.typerFun=A,e.zXuain=N,e.drawZhian=k}(Lgs||(Lgs={}));var Lgs;!function(e){var t=function(t){function a(e,a,i){var r=t.call(this)||this;return r.rankSelectNum=0,r.resultData=e,r.score=e.score,a&&(r.callback=a,r.thisObj=i),r.once(egret.Event.ADDED_TO_STAGE,r.onAddToStage,r),r.once(egret.Event.REMOVED_FROM_STAGE,r.removedFun,r),r}return __extends(a,t),a.prototype.onAddToStage=function(){function t(t){t.call(this);var o=e.createBitmapByName("infoMore_png");p.addChild(o),o.scaleX=o.scaleY=1.2,o.x=gw/2-.03*gh,o.y=.675*gh,e.BtnMode(o);var s=e.createBitmapByName("rankBtn_png");p.addChild(s),e.BtnMode(s),s.x=gw/2-.19*gh,s.y=.805*gh;var l=e.createBitmapByName("matchsBtn_png");p.addChild(l),e.BtnMode(l),l.x=gw/2,l.y=.805*gh;var d=e.createBitmapByName("shareBtn_png");p.addChild(d),e.BtnMode(d),d.x=gw/2+.19*gh,d.y=.805*gh;var c=e.createBitmapByName("hdBtn_png");p.addChild(c),e.BtnMode(c),c.x=gw/2-.19*gh,c.y=.895*gh;var u=e.createBitmapByName("moreBtn_png");p.addChild(u),e.BtnMode(u),u.x=gw/2,u.y=.895*gh;var v=e.createBitmapByName("replayBtn_png");p.addChild(v),e.BtnMode(v),v.x=gw/2+.19*gh,v.y=.895*gh,q.touchEnabled=!0,q.addEventListener(egret.TouchEvent.TOUCH_TAP,a,this),e.removedListener(q,egret.TouchEvent.TOUCH_TAP,a,this),o.addEventListener(egret.TouchEvent.TOUCH_TAP,a,this),e.removedListener(o,egret.TouchEvent.TOUCH_TAP,a,this),s.addEventListener(egret.TouchEvent.TOUCH_TAP,i,this),e.removedListener(s,egret.TouchEvent.TOUCH_TAP,i,this),l.addEventListener(egret.TouchEvent.TOUCH_TAP,r,this),e.removedListener(l,egret.TouchEvent.TOUCH_TAP,r,this),d.addEventListener(egret.TouchEvent.TOUCH_TAP,n,this),e.removedListener(d,egret.TouchEvent.TOUCH_TAP,n,this),c.addEventListener(egret.TouchEvent.TOUCH_TAP,h,this),e.removedListener(c,egret.TouchEvent.TOUCH_TAP,h,this),u.addEventListener(egret.TouchEvent.TOUCH_TAP,g,this),e.removedListener(u,egret.TouchEvent.TOUCH_TAP,g,this),v.addEventListener(egret.TouchEvent.TOUCH_TAP,this.replayFun,this),e.removedListener(v,egret.TouchEvent.TOUCH_TAP,this.replayFun,this)}function a(){$(".shareImg").hide(),info3Fun()}function i(){$(".shareImg").hide(),e.showloading(),e.getRanklistAjax(function(t){e.hideloading(),list3Fun.call(this,t)},function(t){e.hideloading(),e.LAlert(t.msg)},this)}function r(){$(".shareImg").hide(),plan3Fun()}function n(){$(".shareImg").hide(),bgmViewer.hide();var t=e.sharePage();GameLayer.addChild(t)}function h(){$(".shareImg").hide(),$(".hudong").show()}function g(){$(".shareImg").hide(),more3Fun()}isResult=!0;this.touchEnabled=!0;var o=RES.getRes("playerdata_json"),s=Math.floor(Math.random()*playerSpic.length),l=o.data[s];change(s);var d=new egret.Sprite;this.addChild(d);var c=new egret.Sprite;this.addChild(c),this.resultShape=e.createBitmapByName("resultBg_jpg","bg"),d.addChild(this.resultShape);var p=new egret.Sprite;d.addChild(p),p.width=gw,p.width=gh;var u=Math.max(.3,this.resultData.cs2/50),v=Math.max(.3,(this.resultData.cs3+this.resultData.cs4)/600),m=Math.max(.3,this.resultData.cs1/23),y=new egret.Sprite;d.addChild(y),y.x=gw/2+.055*gh,y.y=.194*gh;var w=e.createBitmapByName("one_png");w.x=.102*gh,w.y=.107*gh,w.alpha=0;var T=e.createBitmapByName("one_png");T.x=.1015*gh,T.y=.025*gh;var x=e.createBitmapByName("one_png");x.x=.032*gh,x.y=.146*gh;var f=e.createBitmapByName("one_png");f.x=.17*gh,f.y=.146*gh,e.BtnMode(w,!0),e.BtnMode(T,!0),e.BtnMode(x,!0),e.BtnMode(f,!0);var E=new egret.Shape;y.addChild(E),E.graphics.lineStyle(0,16777215),E.graphics.beginFill(13542565),E.graphics.moveTo(T.x,T.y),E.graphics.lineTo(x.x,x.y),E.graphics.lineTo(f.x,f.y),E.graphics.endFill();var _=new egret.Point(w.x,w.y),C=new egret.Point(T.x,T.y),S=new egret.Point(x.x,x.y),L=new egret.Point(f.x,f.y);C.y=w.y-u*(w.y-T.y);var b=e.xyFun(S.x-_.x,S.y-_.y,egret.Point.distance(_,S)*v);S.x=b.x+_.x,S.y=b.y+_.y,b=e.xyFun(L.x-_.x,L.y-_.y,egret.Point.distance(_,L)*m),L.x=b.x+_.x,L.y=b.y+_.y;var B=new egret.Shape;y.addChild(B),B.graphics.lineStyle(0,16777215),B.graphics.beginFill(11941177),B.graphics.moveTo(C.x,C.y),B.graphics.lineTo(S.x,S.y),B.graphics.lineTo(L.x,L.y),B.graphics.endFill(),T.x=C.x,T.y=C.y,x.x=S.x,x.y=S.y,f.x=L.x,f.y=L.y,y.addChild(T),y.addChild(x),y.addChild(f);var O=e.createBitmapByName("sanjiaoBg_png");y.addChild(O);var G=new egret.Sprite;p.addChild(G);var R=e.createBitmapByName("hbg_png");G.addChild(R);var M=new egret.Shape;G.addChild(M),M.graphics.beginFill(16711680),M.graphics.drawCircle(0,0,54.5),M.graphics.endFill(),M.x=.0715*gh,M.y=.0603*gh,G.x=gw/2-.285*gh,G.y=.11*gh+.056*gh,e.addBitmapByUrl(M.x-54.5,M.y-54.5,109,G,$headImg,"headImg",function(a){a.mask=M;var i=e.createBitmapByName("saveqr_png");d.addChild(i),i.x=gw/2-e.GetWidth(i)/2,i.y=.77*gh;var r=new egret.Rectangle(0,0,gw,gh),n=new e.LScreenShot;n.addShareImg(this,"jpg",r,1);$(".shareImg").show(),t.call(this,function(){T.x=_.x,T.y=_.y,x.x=_.x,x.y=_.y,f.x=_.x,f.y=_.y,egret.Tween.get(T).to({x:C.x,y:C.y},1e3),egret.Tween.get(x).to({x:S.x,y:S.y},1e3),egret.Tween.get(f,{onChange:function(){B.graphics.clear(),B.graphics.lineStyle(0,16777215),B.graphics.beginFill(11941177),B.graphics.moveTo(T.x,T.y),B.graphics.lineTo(x.x,x.y),B.graphics.lineTo(f.x,f.y),B.graphics.endFill()},onChangeObj:this}).to({x:L.x,y:L.y},1e3);var t=e.createBitmapByName("diss_png");d.addChild(t),t.x=gw/2-e.GetWidth(t)/2,t.y=pw_sy,e.LremoveChild(i)})},this);var A=new egret.Sprite;d.addChild(A);var N=new egret.TextField;A.addChild(N),e.textScaleFun(N,.027,0),N.bold=!0,N.text=$nickName;var k=e.createBitmapByName("wuhunBg_png");A.addChild(k);var F=new egret.TextField;A.addChild(F),e.textScaleFun(F,.0195,16777215),F.bold=!0,F.text=l[1],N.y=.01*gh,k.y=.055*gh,F.x=.01*gh,F.y=.06*gh,A.x=gw/2-.15*gh,A.y=.118*gh+.056*gh;var j=new egret.Sprite;d.addChild(j);var H=new egret.TextField;j.addChild(H),e.textScaleFun(H,.022,0),H.text="武魂战斗力：";var I=new egret.TextField;j.addChild(I),e.textScaleFun(I,.022,0),I.textColor=0,I.text="全国排名：",I.x=e.GetWidth(H)-e.GetWidth(I),I.y=e.GetHeight(H)+.017*gh;var U=new egret.TextField;j.addChild(U),e.textScaleFun(U,.034,11418430),U.italic=!0,U.bold=!0,U.text=this.resultData.score;var P=new egret.TextField;j.addChild(P),e.textScaleFun(P,.034,11418430),P.italic=!0,P.bold=!0,P.text=this.resultData.myRank,U.x=.14*gh,P.x=.14*gh,U.y=e.GetHeight(H)-e.GetHeight(U)+.003*gh,P.y=I.y+e.GetHeight(I)-e.GetHeight(P)+.003*gh,j.x=gw/2-.255*gh,j.y=.244*gh+.056*gh;var X=new egret.Sprite;d.addChild(X);var Y=e.createBitmapByName("r_text1_png");X.addChild(Y);var D=e.createBitmapByName(playerSpic[s][0]);X.addChild(D);var W=e.createBitmapByName("r_text2_png");X.addChild(W),D.x=Y.x+e.GetWidth(Y),D.y=.02*-gh,W.x=D.x+e.GetWidth(D)+.003*gh,X.x=gw/2-e.GetWidth(X)/2,X.y=.422*gh;var V=e.createBitmapByName("picBg_png");d.addChild(V),V.x=gw/2-.24*gh,V.y=.501*gh;var q=e.createBitmapByName(playerSpic[s][2]);d.addChild(q),q.x=V.x+(e.GetWidth(V)-e.GetWidth(q))/2-1,q.y=V.y+(e.GetHeight(V)-e.GetHeight(q))/2-1.8,V.scaleX=V.scaleY=q.scaleX=q.scaleY=.85;var z=new egret.TextField;d.addChild(z),e.textScaleFun(z,.02,0),z.x=gw/2-.03*gh,z.y=.515*gh,z.lineSpacing=.006*gh,z.textFlow=[{text:"武魂："+l[1],style:{}},{text:"\n外号："+l[2],style:{}},{text:"\n年龄："+l[3],style:{}},{text:"\n身高："+l[4],style:{}},{text:"\n出身："+l[5],style:{}},{text:"\n特点："+l[6],style:{}}]},a.prototype.rankFun=function(){},a.prototype.replayFun=function(t){var a=t.currentTarget;a.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.replayFun,this),isResult=!1,$(".shareImg").hide(),stopAudio("result");var i=new e.LHomePage;GameLayer.addChild(i),e.LremoveChild(this),this.callback&&this.callback.call(this.thisObj)},a.prototype.rankViewFun=function(){function t(e){var t=e.currentTarget;if(this.rankSelectNum==t.selectId)return!1;this.rankSelectNum=t.selectId;for(var a=0;a<h.length;a++)h[a].texture=RES.getRes("rank_btn"+(a+1)+"_jpg");t.texture=RES.getRes("rank_btnv"+(this.rankSelectNum+1)+"_jpg")}function a(){egret.Tween.get(this).to({scaleX:1,scaleY:1,x:1,y:1},300,egret.Ease.quadOut).call(function(){},this),egret.Tween.get(this.rankView).to({x:gw-pw_sx},300,egret.Ease.quadOut),egret.Tween.get(this.rankLayer).to({x:gw-pw_sx},300,egret.Ease.quadOut).call(function(){e.LremoveChild(this.rankLayer)},this)}this.rankView=new egret.Sprite,GameLayer.addChild(this.rankView),this.rankView.touchEnabled=!0;var i=new egret.Shape;this.rankView.addChild(i),i.graphics.beginFill(16777215),i.graphics.drawRect(0,0,gw,gh),i.graphics.endFill();var r=e.createBitmapByName("rankBg_jpg");this.rankView.addChild(r),r.x=gw/2-e.GetWidth(r)/2,r.y=0,i.graphics.beginFill(7299071),i.graphics.drawRect(0,0,gw,e.GetHeight(r)),i.graphics.endFill(),this.rankView.x=gw-pw_sx;var n=e.createBitmapByName("rank_back_png");this.rankView.addChild(n),e.BtnMode(n),n.x=pw_sx+e.GetWidth(n)/2,n.y=.005*gh+e.GetHeight(n)/2;for(var h=[],g=0;3>g;g++){var o=e.createBitmapByName("rank_btn"+(g+1)+"_jpg");this.rankView.addChild(o),e.BtnMode(o),o.x=gw/2+e.GetWidth(o)*(g-1),o.y=.122*gh,o.selectId=g,o.selectId==this.rankSelectNum&&(o.texture=RES.getRes("rank_btnv"+(g+1)+"_jpg")),o.addEventListener(egret.TouchEvent.TOUCH_TAP,t,this),e.removedListener(o,egret.TouchEvent.TOUCH_TAP,t,this),h.push(o)}n.addEventListener(egret.TouchEvent.TOUCH_TAP,a,this),e.removedListener(n,egret.TouchEvent.TOUCH_TAP,a,this)},a.prototype.rankFun1=function(){this.rankView.x=gw-pw_sx,egret.Tween.get(this.rankView).to({x:0},300,egret.Ease.quadOut),egret.Tween.get(this).to({scaleX:.9,scaleY:.9,x:.05*gw,y:.05*gh},300,egret.Ease.quadOut).wait(30).call(function(){this.rankLayer=new e.LRankPage,GameLayer.addChild(this.rankLayer)},this)},a.prototype.removedFun=function(){},a}(egret.DisplayObjectContainer);e.resultPage=t,__reflect(t.prototype,"Lgs.resultPage")}(Lgs||(Lgs={}));var Lgs;!function(e){var t=function(t){function a(){var e=t.call(this)||this;return e.canRun=!1,e.once(egret.Event.ADDED_TO_STAGE,e.onAddToStage,e),e}return __extends(a,t),a.prototype.onAddToStage=function(){this.bgmLayer=e.createBitmapByName("musicOn_png"),e.scaleFun(this.bgmLayer,.06),this.addChild(this.bgmLayer),this.bgmLayer.touchEnabled=!0,this.x=gw-pw_sx-e.GetWidth(this)-.015*gh,this.y=.02*gh,e.BtnMode(this.bgmLayer),this.bgmLayer.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.on_off,this),this.canRun&&(this.Timer=new egret.Timer(30),this.Timer.addEventListener(egret.TimerEvent.TIMER,this.Run,this)),"pause"!=egret.localStorage.getItem(localbgmStr)?(null==egret.localStorage.getItem(localbgmStr)&&egret.localStorage.setItem(localbgmStr,"play"),this.play()):this.pause()},a.prototype.setnewPosition=function(e,t,a){this.x=e,this.y=t,(a||0==a)&&(this.rotation=a)},a.prototype.setinitPosition=function(){this.rotation=0,this.x=gw-pw_sx-e.GetWidth(this)-.016*gh,this.y=.016*gh},a.prototype.Run=function(){this.bgmLayer.rotation+=2},a.prototype.on_off=function(){this.isPlay?(egret.localStorage.setItem(localbgmStr,"pause"),stopOtherAudio("bgm"),this.pause()):(egret.localStorage.setItem(localbgmStr,"play"),this.play())},a.prototype.play=function(){this.canRun&&this.Timer.start(),this.isPlay=!0,this.bgmLayer.texture=RES.getRes("musicOn_png"),$("#bgm")[0].play()},a.prototype.pause=function(){this.canRun&&(this.bgmLayer.rotation=0,this.Timer.stop()),this.isPlay=!1,this.bgmLayer.texture=RES.getRes("musicOff_png"),$("#bgm")[0].pause()},a.prototype.show=function(){this.bgmLayer.visible=!0},a.prototype.hide=function(){this.bgmLayer.visible=!1},a}(egret.DisplayObjectContainer);e.LBgm=t,__reflect(t.prototype,"Lgs.LBgm")}(Lgs||(Lgs={})),function(e){var t=function(t){function a(e){var a=t.call(this)||this;return a.isShow=!1,a.once(egret.Event.ADDED_TO_STAGE,a.onAddToStage,a),a}return __extends(a,t),a.prototype.onAddToStage=function(){this.touchEnabled=!0,this.screenMask=new egret.Shape,this.addChild(this.screenMask);var t=new egret.Matrix;t.createGradientBox(gh,gh,.5*Math.PI,0,0),this.screenMask.graphics.beginGradientFill(egret.GradientType.LINEAR,[0,0,0,0],[0,.7,.7,0],[96.9,102,132.6,255*.54],t),this.screenMask.graphics.drawRect(0,0,gh,gh),this.screenMask.graphics.endFill(),this.screenMask.x=(gw-gh)/2,this.screenMask.alpha=.5,this.loadText=new egret.TextField,this.addChild(this.loadText),e.textScaleFun(this.loadText,.028,16777215),this.loadText.text="网络请求中",this.loadText.x=gw/2-e.GetWidth(this.loadText)/2,this.loadText.y=.42*gh,this.loadText.alpha=.8;var a=new egret.MovieClipDataFactory(RES.getRes("loading_json"),RES.getRes("loading_png"));this.loadingMc=new egret.MovieClip(a.generateMovieClipData("loading")),this.loadingMc.scaleX=this.loadingMc.scaleY=.4*initScale,this.addChild(this.loadingMc),this.loadingMc.x=gw/2-e.GetWidth(this.loadingMc)/2,this.loadingMc.frameRate=18,this.loadingMc.y=.46*gh,this.loadingMc.gotoAndPlay("run",-1)},a.prototype.loadingShow=function(t){this.touchEnabled=!0,this.visible=!0,this.loadingMc.play(),t=t?t:"网络请求中",this.loadText.text=t,this.loadText.x=gw/2-e.GetWidth(this.loadText)/2},a.prototype.loadingHide=function(){this.visible=!1,this.loadingMc.stop()},a}(egret.DisplayObjectContainer);e.LScreen=t,__reflect(t.prototype,"Lgs.LScreen")}(Lgs||(Lgs={}));var Lgs;!function(e){var t=function(t){function a(){var e=t.call(this)||this;return e.csNums=40,e.scale1=.7,e.maxJuli=.5*gh,e.minSudu=.0015*gh,e.maxSudu=.0035*gh,e.csw=.9*gw,e.once(egret.Event.ADDED_TO_STAGE,e.onAddToStage,e),e.once(egret.Event.REMOVED_FROM_STAGE,e.removedFun,e),e}return __extends(a,t),a.prototype.onAddToStage=function(){function t(){for(var e=0;e<h.length;e++){var t=h[e];t.y+=t.speed2,t.rotation+=t.rs,(t.rotation>=t.r0+t.rr||t.rotation<=t.r0+t.rr)&&(t.rr=-t.rr)}for(var i=function(e){var t=h[e];t.y>r.maxJuli&&egret.Tween.get(t).to({alpha:0},500).call(function(){a.call(this,t)},r)},r=this,e=0;e<h.length;e++)i(e)}function a(t){var a=Math.floor(Math.random()*n.length);t.texture=RES.getRes(n[a]),t.scaleX=t.scaleY=initScale*(this.scale1+Math.random()),t.rotation=180*Math.random(),t.x=(gw-this.csw)/2+Math.random()*this.csw,t.y=2*-e.GetHeight(t),t.speed2=Math.random()*this.maxSudu+this.minSudu,t.r0=t.rotation,t.rr=20+20*Math.random();var i=Math.floor(2*Math.random());0==i?t.rs=3:t.rs=-3,t.alpha=1}var i=new egret.Sprite;this.addChild(i);var r=new egret.Sprite;this.addChild(r);for(var n=["cd1_png","cd2_png","cd3_png","cd4_png","cd5_png","cd6_png","cd7_png","cd8_png","cd9_png"],h=[],g=0;g<this.csNums;g++){var o=Math.floor(Math.random()*n.length),s=e.createBitmapByName(n[o]);i.addChild(s),s.scaleX=s.scaleY=initScale*(this.scale1+Math.random()),s.rotation=180*Math.random(),s.x=(gw-this.csw)/2+Math.random()*this.csw,s.y=-e.GetHeight(s)-.1*gh+Math.random()*gh*.5,s.speed2=Math.random()*this.maxSudu+this.minSudu,s.r0=s.rotation,s.rr=20+20*Math.random();var l=Math.floor(2*Math.random());0==l?s.rs=3:s.rs=-3,h.push(s)}this.addEventListener(egret.Event.ENTER_FRAME,t,this),e.removedListener(this,egret.Event.ENTER_FRAME,t,this)},a.prototype.removedFun=function(){},a}(egret.DisplayObjectContainer);e.LFlowSnow=t,__reflect(t.prototype,"Lgs.LFlowSnow")}(Lgs||(Lgs={}));var localStartGame2=!1,Lgs;!function(e){var t=function(t){function a(e,a,i,r){var n=t.call(this)||this;return n.callback=!1,n.thisObj=!1,e&&(n.callback=e),a&&(n.thisObj=a),n.once(egret.Event.ADDED_TO_STAGE,n.onAddToStage,n),n.once(egret.Event.REMOVED_FROM_STAGE,n.removedFun,n),n}return __extends(a,t),a.prototype.onAddToStage=function(){function t(){this.removeEventListener(egret.TouchEvent.TOUCH_TAP,t,this),g.call(this)
}function a(){if(!l){var t=new egret.Sprite;u.addChild(t);var a=e.createBitmapByName("homebg1_jpg","bg");t.addChild(a);var r=e.createBitmapByName("text1_png");t.addChild(r),r.x=gw/2-.26*gh,r.y=.275*gh;var n=e.createBitmapByName("name1_png");t.addChild(n),n.x=gw/2-.165*gh,n.y=.09*gh,e.BtnMode(n,!0);var h=e.createBitmapByName("hero1_1_png");t.addChild(h),h.x=gw/2-.17*gh,h.y=.42*gh;var g=e.createBitmapByName("hero1_2_png");t.addChild(g),g.x=gw/2-.19*gh,g.y=.42*gh;var o=e.createBitmapByName("hero1_2_png");t.addChild(o),o.x=gw/2-.19*gh,o.y=.42*gh,e.BtnMode(o,!0),a.alpha=0,egret.Tween.get(a).to({alpha:1},1e3),n.alpha=0,r.alpha=0;var s=r.x;r.x=r.x-.05*gh,egret.Tween.get(r).to({alpha:1},500),egret.Tween.get(r).to({x:s},1500,egret.Ease.quadOut),h.alpha=0,g.alpha=0,o.alpha=0,egret.Tween.get(h).to({alpha:1},320);var d=h.x;egret.Tween.get(h).to({x:d-.02*gh},1500,egret.Ease.quadOut).call(function(){h.alpha=0,g.alpha=1,o.alpha=1,egret.Tween.get(o).to({alpha:0,scaleX:2,scaleY:2},320,egret.Ease.quadOut),playAudio("long",0);var a=n.x,r=n.y;n.x=n.x-.15*gh,n.y=n.y-.15*gh,n.scaleX=n.scaleY=3,egret.Tween.get(n).to({alpha:1},200),egret.Tween.get(n).to({scaleX:1,scaleY:1},300,egret.Ease.circIn),egret.Tween.get(n).to({x:a,y:r},300,egret.Ease.circIn).wait(800).call(function(){egret.Tween.get(t).to({alpha:0},320).call(function(){e.LremoveChild(t)},this),i.call(this)},this)},this)}}function i(){if(!l){var t=new egret.Sprite;u.addChild(t);var a=e.createBitmapByName("homebg2_jpg","bg");t.addChild(a);var i=e.createBitmapByName("text2_png");t.addChild(i),i.x=gw/2+.14*gh,i.y=.116*gh;var n=e.createBitmapByName("name2_png");t.addChild(n),n.x=gw/2-.275*gh,n.y=.089*gh,e.BtnMode(n,!0);var h=e.createBitmapByName("hero2_1_png");t.addChild(h),h.x=gw/2-.27*gh,h.y=.355*gh;var g=e.createBitmapByName("hero2_2_png");t.addChild(g),g.x=gw/2-.29*gh,g.y=.355*gh;var o=e.createBitmapByName("hero2_2_png");t.addChild(o),o.x=gw/2-.29*gh,o.y=.355*gh,e.BtnMode(o,!0),a.alpha=0,egret.Tween.get(a).to({alpha:1},1e3),n.alpha=0,i.alpha=0;var s=i.x;i.x=i.x-.05*gh,egret.Tween.get(i).to({alpha:1},500),egret.Tween.get(i).to({x:s},1500,egret.Ease.quadOut),h.alpha=0,g.alpha=0,o.alpha=0,egret.Tween.get(h).to({alpha:1},320);var d=h.x;egret.Tween.get(h).to({x:d-.02*gh},1500,egret.Ease.quadOut).call(function(){h.alpha=0,g.alpha=1,o.alpha=1,egret.Tween.get(o).to({alpha:0,scaleX:2,scaleY:2},320,egret.Ease.quadOut),playAudio("hu",0);var a=n.x,i=n.y;n.x=n.x-.15*gh,n.y=n.y-.1*gh,n.scaleX=n.scaleY=3,egret.Tween.get(n).to({alpha:1},200),egret.Tween.get(n).to({scaleX:1,scaleY:1},300,egret.Ease.circIn),egret.Tween.get(n).to({x:a,y:i},300,egret.Ease.circIn).wait(800).call(function(){egret.Tween.get(t).to({alpha:0},320).call(function(){e.LremoveChild(t)},this),r.call(this)},this)},this)}}function r(){if(!l){var t=new egret.Sprite;u.addChild(t);var a=e.createBitmapByName("homebg3_jpg","bg");t.addChild(a);var i=e.createBitmapByName("text3_png");t.addChild(i),i.x=gw/2-.256*gh,i.y=.31*gh;var r=e.createBitmapByName("name3_png");t.addChild(r),r.x=gw/2-.25*gh,r.y=.1*gh,e.BtnMode(r,!0);var h=e.createBitmapByName("hero3_1_png");t.addChild(h),h.x=gw/2-.13*gh,h.y=.431*gh;var g=e.createBitmapByName("hero3_2_png");t.addChild(g),g.x=gw/2-.15*gh,g.y=.431*gh;var o=e.createBitmapByName("hero3_2_png");t.addChild(o),o.x=gw/2-.15*gh,o.y=.431*gh,o.anchorOffsetX=280,o.anchorOffsetY=294,o.x=o.x+280,o.y=o.y+294,a.alpha=0,egret.Tween.get(a).to({alpha:1},1e3),r.alpha=0,i.alpha=0;var s=i.x;i.x=i.x-.05*gh,egret.Tween.get(i).to({alpha:1},500),egret.Tween.get(i).to({x:s},1500,egret.Ease.quadOut),h.alpha=0,g.alpha=0,o.alpha=0,egret.Tween.get(h).to({alpha:1},320);var d=h.x;egret.Tween.get(h).to({x:d-.02*gh},1500,egret.Ease.quadOut).call(function(){h.alpha=0,g.alpha=1,o.alpha=1,egret.Tween.get(o).to({alpha:0,scaleX:2,scaleY:2},320,egret.Ease.quadOut),playAudio("feng",0);var a=r.x,i=r.y;r.x=r.x-.15*gh,r.y=r.y-.1*gh,r.scaleX=r.scaleY=3,egret.Tween.get(r).to({alpha:1},200),egret.Tween.get(r).to({scaleX:1,scaleY:1},300,egret.Ease.circIn),egret.Tween.get(r).to({x:a,y:i},300,egret.Ease.circIn).wait(800).call(function(){egret.Tween.get(t).to({alpha:0},320).call(function(){e.LremoveChild(t)},this),n.call(this)},this)},this)}}function n(){if(!l){var t=new egret.Sprite;u.addChild(t);var a=e.makeaShape(0,.9);t.addChild(a);var i=new egret.Sprite;t.addChild(i);var r=new egret.Sprite;t.addChild(r);var n=new egret.Sprite;t.addChild(n);var g=e.createBitmapByName("hpbg4_1_png","bg");i.addChild(g);var o=e.createBitmapByName("hpbg4_2_png","bg");r.addChild(o);var s=e.createBitmapByName("hpbg4_3_png","bg");n.addChild(s);var d=e.createBitmapByName("hp4_1_png");i.addChild(d),d.x=gw/2-.295*gh,d.y=.112*gh;var c=e.createBitmapByName("hp4_2_png");r.addChild(c),c.x=gw/2+.025*gh,c.y=.024*gh;var p=e.createBitmapByName("hp4_3_png");n.addChild(p),p.x=gw/2-.14*gh,p.y=.555*gh,p.anchorOffsetX=p.width/2,p.anchorOffsetY=.8*p.height,p.x=p.x+p.anchorOffsetX,p.y=p.y+p.anchorOffsetY;var v=e.createBitmapByName("hp4_3_png");n.addChild(v),v.x=gw/2-.14*gh,v.y=.555*gh,v.anchorOffsetX=v.width/2,v.anchorOffsetY=.8*v.height,v.x=v.x+v.anchorOffsetX,v.y=v.y+v.anchorOffsetY,v.alpha=0;var m=e.createBitmapByName("hpsui_png");t.addChild(m),m.scaleX=m.scaleY=2,m.x=gw/2-e.GetWidth(m)/2,m.y=gh/2-e.GetHeight(m)/2,m.alpha=0;var y=i.x,w=r.x,T=i.y,x=r.y;n.y;i.x=pw_sx-e.GetWidth(d),i.y=pw_sy-e.GetHeight(d),r.x=gw-e.GetWidth(d),r.y=pw_sy-e.GetHeight(c),n.y=gh-pw_sy-e.GetHeight(p),egret.Tween.get(i).to({x:y,y:T},320,egret.Ease.circInOut),egret.Tween.get(r).wait(160).to({x:w,y:x},320,egret.Ease.circInOut),egret.Tween.get(n).wait(320).to({y:T},320,egret.Ease.circIn);var f=d.x,E=c.x,_=p.x,C=d.y,S=c.y,L=p.y;d.x=f-.02*gh,d.y=C+.02*gh,c.x=E+.02*gh,c.y=S-.01*gh,p.x=_+.02*gh,p.y=L+.02*gh,v.x=_+.02*gh,v.y=L+.02*gh,p.scaleX=p.scaleY=.5,egret.Tween.get(d).to({x:f,y:C},5e3,egret.Ease.quadOut),egret.Tween.get(c).wait(320).call(function(){playAudio("so",0)}).to({x:E,y:S},5e3,egret.Ease.quadOut),egret.Tween.get(p).wait(640).call(function(){playAudio("so",0)}).to({x:_,y:L},5e3,egret.Ease.quadOut),egret.Tween.get(v).wait(640).call(function(){playAudio("so",0)}).to({x:_,y:L},5e3,egret.Ease.quadOut),egret.Tween.get(p).wait(640).to({scaleX:1,scaleY:1},200,egret.Ease.quadIn).call(function(){v.alpha=1,egret.Tween.get(v).to({scaleX:2,scaleY:2,alpha:0},320,egret.Ease.quadOut),playAudio("boli",0),egret.Tween.get(m).wait(200).call(function(){m.alpha=1;var a=new e.ShockUtils;a.shock(e.ShockUtils.MAP);var i=6;a._target=GameLayer,a.start(i),egret.Tween.get(t).wait(800).to({alpha:0},320).call(function(){e.LremoveChild(t),h.call(this)},this)},this)},this)}}function h(){function a(){if(p++,c[p-1]){var t=c[p-1];egret.Tween.get(t.pic2).wait(675).to({scaleX:t.picScale,scaleY:t.picScale},900,egret.Ease.quadOut).to({alpha:0},320),egret.Tween.get(t.pic1).wait(1575).to({alpha:1},320).call(function(){5==p&&egret.Tween.get(t.pic1).wait(1895).call(function(){egret.Tween.removeTweens(n),egret.Tween.removeTweens(h),egret.Tween.removeTweens(o),egret.Tween.get(n).to({alpha:0},400),egret.Tween.get(h).to({alpha:0},400),egret.Tween.get(o).to({alpha:0},400).call(function(){g.call(this),e.LremoveChild(i)},this),egret.Tween.get(s).to({alpha:0},400)},this)},this)}if(c[p]){var r=c[p];egret.Tween.get(r.pic1).wait(410).to({alpha:0},320),egret.Tween.get(r.pic2).wait(410).to({alpha:1},320).to({scaleX:1,scaleY:1},900,egret.Ease.quadOut).call(function(){5>p&&a.call(this)},this)}}if(m.visible=!0,m.alpha=.5,e.removedTweens(m),egret.Tween.get(m).to({alpha:.5}).call(function(){egret.Tween.get(m,{loop:!0}).to({alpha:1},500).to({alpha:.5},500)},this),this.addEventListener(egret.TouchEvent.TOUCH_TAP,t,this),e.removedListener(this,egret.TouchEvent.TOUCH_TAP,t,this),!l){v.visible=!1;var i=new egret.Sprite;u.addChild(i);var r=e.createBitmapByName("prefaceBg_jpg","bg");i.addChild(r);var n=e.createBitmapByName("preface_1_png");i.addChild(n),n.x=gw/2-.35*gh,n.y=.1*-gh;var h=e.createBitmapByName("preface_2_png");i.addChild(h),h.x=gw/2-.21*gh,h.y=.05*-gh;var o=e.createBitmapByName("preface_3_png");i.addChild(o),o.x=gw/2+.045*gh,o.y=.562*gh;var s=new egret.Sprite;i.addChild(s);for(var d=["公元618年      唐朝建立","开武举之先河","引武林众豪杰争相逐鹿","转眼1400年后武林风再起","无数英雄豪杰再次剑指武林宝座"],c=[],p=-1,y=0;y<d.length;y++){var w=new egret.Sprite;s.addChild(w);var T=e.createBitmapByName("pb"+(y+1)+"_png");w.addChild(T);var x=e.createBitmapByName("pt"+(y+1)+"_png");w.addChild(x),x.x=T.x+e.GetWidth(T)/2-e.GetWidth(x)/2,x.y=T.y+e.GetHeight(T)/2-e.GetHeight(x)/2,e.BtnMode(T,!0),e.BtnMode(x,!0),e.BtnMode(w,!0),w.x=gw/2,w.y=.36*gh+.065*gh*y,w.pic1=x,w.pic2=T,T.scaleX=T.scaleY=x.width/T.width,w.picScale=x.width/T.width,T.alpha=0,c.push(w)}n.alpha=.5,h.alpha=0,o.alpha=1,egret.Tween.get(h).to({alpha:1},1e3),e.removedTweens(n),e.removedTweens(o),egret.Tween.get(n,{loop:!0}).to({alpha:1},1500).to({alpha:.5},1500),egret.Tween.get(o,{loop:!0}).to({alpha:.5},1500).to({alpha:1},1500),a.call(this)}}function g(){l||(l=!0,e.LremoveChild(m),e.LremoveChild(u),e.LremoveChild(v),o.call(this))}function o(){function t(){$(".shareImg").hide(),e.showloading(),e.getRanklistAjax(function(t){e.hideloading(),list3Fun.call(this,t)},function(t){e.hideloading(),e.LAlert(t.msg)},this)}function a(){e.LremoveChild(p),o.removeEventListener(egret.TouchEvent.TOUCH_TAP,a,this),s.call(this,function(){egret.Tween.get(i).to({alpha:0},1e3).call(function(){e.LremoveChild(i)},this),e.LremoveChild(n),e.LremoveChild(h),e.LremoveChild(o)})}var i=new egret.Sprite;d.addChild(i);var r=e.createBitmapByName("prefaceBg_jpg","bg");i.addChild(r);var n=e.createBitmapByName("letter_text_png");i.addChild(n),n.x=gw/2-e.GetWidth(n)/2,n.y=.172*gh;var h=e.createBitmapByName("letter_blood_png");i.addChild(h),h.x=gw/2-.332*gh,h.y=.153*gh;var g=e.createBitmapByName("letter_hero_png");i.addChild(g),g.x=gw/2-.345*gh,g.y=.408*gh;var o=e.createBitmapByName("letter_png");i.addChild(o),e.BtnMode(o),o.anchorOffsetX=264,o.anchorOffsetY=245,o.x=gw/2+.005*gh,o.y=.522*gh,o.alpha=0,o.rotation=-5,e.removedTweens(o),n.alpha=0,g.alpha=0,h.alpha=0;var l=g.x,c=g.y;g.x=l-.03*gh,g.y=c+.025*gh,egret.Tween.get(n).to({alpha:1},3e3,egret.Ease.quadOut),egret.Tween.get(g).wait(250).to({alpha:1},1e3,egret.Ease.quadOut),egret.Tween.get(g).wait(250).to({x:l,y:c},1e3,egret.Ease.quadOut),o.scaleX=o.scaleY=3,egret.Tween.get(o).wait(800).call(function(){playAudio("zs",0)},this).to({scaleX:1,scaleY:1},500,egret.Ease.circIn),egret.Tween.get(o).wait(800).to({alpha:1},500).call(function(){o.addEventListener(egret.TouchEvent.TOUCH_TAP,a,this),e.removedListener(o,egret.TouchEvent.TOUCH_TAP,a,this),egret.Tween.get(h).to({alpha:1},160,egret.Ease.quadOut).call(function(){egret.Tween.get(o,{loop:!0}).to({rotation:5},75).to({rotation:-5},75).to({rotation:5},75).to({rotation:-5},75).to({rotation:5},75).to({rotation:-5},75).to({rotation:0},37.5).wait(600)},this)},this);var p=e.createBitmapByName("rankBtn_png");openGame1||(i.addChild(p),e.BtnMode(p),p.x=gw-e.GetWidth(p)/2-.02*gh,p.y=.93*gh,p.addEventListener(egret.TouchEvent.TOUCH_TAP,t,this),e.removedListener(p,egret.TouchEvent.TOUCH_TAP,t,this))}function s(t){function a(){h.removeEventListener(egret.TouchEvent.TOUCH_TAP,a,this),this.startFun(function(){t&&t.call(this),egret.Tween.get(i).to({alpha:0},1e3)})}var i=new egret.Sprite;d.addChild(i),i.touchEnabled=!0;var r=new egret.Sprite;i.addChild(r),r.width=gw,r.height=gh;var n=e.createBitmapByName("rules_png");r.addChild(n),n.x=gw/2-e.GetWidth(n)/2,n.y=.085*gh;var h=e.createBitmapByName("startBtn_png");r.addChild(h),e.BtnMode(h),h.x=gw/2,h.y=.875*gh;var g=e.createBitmapByName("startText_png");r.addChild(g),e.BtnMode(g,!0),g.x=h.x,g.y=h.y,r.scaleX=r.scaleY=0,e.winEnterAni(!1,r,"scale01"),egret.Tween.get(g,{loop:!0}).to({scaleX:1.1,scaleY:1.1},240).to({scaleX:1,scaleY:1},240).to({scaleX:1.1,scaleY:1.1},240).to({scaleX:1,scaleY:1},240),h.addEventListener(egret.TouchEvent.TOUCH_TAP,a,this),e.removedListener(h,egret.TouchEvent.TOUCH_TAP,a,this)}this.touchEnabled=!0;var l=!1,d=new egret.Sprite;this.addChild(d);var c=new egret.Sprite;this.addChild(c);var p=e.makeaShape(16777215,.9);d.addChild(p);var u=new egret.Sprite;d.addChild(u);var v=e.createBitmapByName("home_mask_jpg");c.addChild(v),v.x=gw/2-e.GetWidth(v)/2,v.y=gh;var m=e.createBitmapByName("jumpBtn_png");this.addChild(m),e.BtnMode(m,!0),m.x=gw/2,m.y=.95*gh,m.visible=!1,localStartGame2?t.call(this):a.call(this)},a.prototype.startFun=function(t){e.showloading(),e.startGameAjax(function(a){e.hideloading(),localStartGame2=!0,openGame1=!1,t&&t.call(this),egret.setTimeout(function(){var t={scode:a.scode,gcode1:a.gcode1,gcode2:a.gcode2,firstgame:a.firstgame},i=new e.GameContainer(t);GameLayer.addChild(i),e.LremoveChild(this)},this,800)},function(t){e.hideloading(),e.LAlert(t.msg)},this)},a.prototype.removeFun=function(){e.LremoveChild(this)},a.prototype.rankFun=function(){this.rankLayer=new e.LRankPage,GameLayer.addChild(this.rankLayer)},a.prototype.removedFun=function(){},a}(egret.DisplayObjectContainer);e.LHomePage=t,__reflect(t.prototype,"Lgs.LHomePage")}(Lgs||(Lgs={}));var Lgs;!function(e){var t=function(t){function a(){var e=t.call(this)||this;return e.htmlResnum=69,e.total=0,e.jdtiao_ok=!1,e.loadsArr=[],e}return __extends(a,t),a.prototype.setProgress=function(t,a,i){this.jdtiao_ok&&(1==t&&(this.total=a),this.loadText.text=Math.floor(t/(a+this.htmlResnum)*100)+"%",this.loadText.x=gw/2-e.GetWidth(this.loadText)/2,this.zhezhao.x=this.jdtiao.x-.265*gh+.265*gh*t/(a+this.htmlResnum))},a.prototype.createLoading=function(){this.touchEnabled=!0,$gameStage=this.stage;var t=e.createBitmapByName("loadBg_jpg","bg");this.addChild(t);var a=e.createBitmapByName("eye_png");this.addChild(a),a.x=gw/2+.125*gh,a.y=.141*gh;var i=e.createBitmapByName("load_light_png");this.addChild(i),i.x=pw_sx,i.y=.005*-gh,e.BtnMode(a,!0),e.removedTweens(a),egret.Tween.get(a,{loop:!0}).to({alpha:.3},1e3).to({alpha:1},1e3),i.alpha=.5,e.removedTweens(i),egret.Tween.get(i,{loop:!0}).to({alpha:.9},1500).to({alpha:.5},1500);var r=e.createBitmapByName("load_title_png");this.addChild(r),r.x=gw/2-.255*gh,r.y=.097*gh,r.alpha=0,e.BtnMode(r,!0),r.scaleX=r.scaleY=3,egret.Tween.get(r).wait(100).to({scaleX:1,scaleY:1},500,egret.Ease.bounceOut),egret.Tween.get(r).wait(100).to({alpha:1},500);var n=new egret.Sprite;this.addChild(n),n.y=.755*gh,this.jdbg=e.createBitmapByName("jdbg_png"),n.addChild(this.jdbg),this.jdbg.x=gw/2-e.GetWidth(this.jdbg)/2,this.jdtiao=e.createBitmapByName("jdfg_png"),n.addChild(this.jdtiao),this.jdtiao.x=this.jdbg.x,this.jdtiao.y=this.jdbg.y,this.zhezhao=e.createBitmapByName("jdfg_png"),n.addChild(this.zhezhao),this.zhezhao.x=this.jdtiao.x-.265*gh,this.zhezhao.y=this.jdtiao.y,this.jdtiao.mask=this.zhezhao,this.loadText=new egret.TextField,e.textScaleFun(this.loadText,.0165,16777215),this.addChild(this.loadText),this.loadText.text="0%",this.loadText.x=gw/2-e.GetWidth(this.loadText)/2,this.loadText.y=.87*gh,this.jdtiao_ok=!0},a.prototype.drawAecShape=function(t){t%=361,this.arcShape.graphics.clear(),this.arcShape.graphics.lineStyle(.015*gh,16777215,1),this.arcShape.graphics.drawArc(0,0,e.GetWidth(this.jdbg)/2-.014*gh,0,t*Math.PI/180,!1),this.arcShape.graphics.endFill()},a.prototype.RemovedFun=function(){},a}(egret.Sprite);e.loadUI=t,__reflect(t.prototype,"Lgs.loadUI")}(Lgs||(Lgs={}));var Lgs;!function(e){var t=function(t){function a(e,a,i,r){var n=t.call(this)||this;return n.callback=!1,n.thisObj=!1,n.closeNum=1,n.rankData=!1,e&&(n.callback=e),a&&(n.thisObj=a),i&&(n.rankData=i),r&&(n.closeNum=r),n.once(egret.Event.ADDED_TO_STAGE,n.onAddToStage,n),n.once(egret.Event.REMOVED_FROM_STAGE,n.removedFun,n),n}return __extends(a,t),a.prototype.onAddToStage=function(){function t(t){e.hideloading();var i=t;0==i.ranklist.length?(g.text="暂时还没有人进入排行榜哦！",g.x=gw/2-e.GetWidth(g)/2):e.LremoveChild(g),0!=i.player.playerRank&&(n.text=i.player.playerRank,e.textScaleFun(n,.026,16777215),n.stroke=3,n.strokeColor=0,n.x=gw/2-.1*gh),i.player.topScore||(i.player.topScore=0),h.text=i.player.topScore+"",h.x=gw/2+.15*gh-e.GetWidth(h)/2;var r=new egret.Sprite,s=new egret.Shape;r.addChild(s);for(var l=0;l<i.ranklist.length;l++){var d=a.call(this,i.ranklist[l],l+1);r.addChild(d),d.y=.02*gh+this.listHeight*l}var c=new egret.ScrollView;this.winLayer.addChild(c),c.setContent(r),c.width=this.listWidth,c.height=.602*gh,c.x=gw/2-e.GetWidth(c)/2,c.y=.261*gh,c.horizontalScrollPolicy="off",c.verticalScrollPolicy="on",c.scrollSpeed=.5,c.scrollBeginThreshold=1,c.bounces=!0,this.winLayer.addChild(o),s.graphics.beginFill(0),s.graphics.drawRect(0,0,e.GetWidth(r),Math.max(c.height,e.GetHeight(r)+.051*gh)),s.graphics.endFill(),s.alpha=0}function a(t,a){var i=new egret.Sprite,r=e.createBitmapByName("listBg_png");i.addChild(r),1==a&&(this.listWidth=e.GetWidth(r),this.listHeight=e.GetHeight(r)+.011*gh);var n=new egret.Sprite,h=i.getChildIndex(r);i.addChildAt(n,h);var g=e.createBitmapByName("headBg_jpg");g.x=.01*gh,g.y=e.GetHeight(r)/2-e.GetHeight(g)/2,e.addBitmapByUrl(g.x,g.y,e.GetHeight(g),n,t.headImg,"headImg");var o=new egret.TextField;if(i.addChild(o),e.textScaleFun(o,.025,15741779),o.bold=!0,o.textFlow=[{text:"NO."+a,style:{size:28.5}},{text:"\n",style:{}},{text:t.nickName.substring(0,10),style:{textColor:1405062,size:23.75}}],o.x=.09*gh,o.y=.018*gh,1==a||2==a||3==a){var s=e.createBitmapByName("plate"+a+"_png");i.addChild(s),s.x=o.x+e.GetWidth(o)+.005*gh,s.y=o.y+.004*gh}var l=new egret.TextField;i.addChild(l),e.textScaleFun(l,.026,15741779),l.bold=!0,l.text=t.topScore,l.x=.39*gh-e.GetWidth(l),l.y=e.GetHeight(r)/2-e.GetHeight(l)/2;var d=new egret.TextField;return i.addChild(d),e.textScaleFun(d,.018,15741779),d.bold=!0,d.text="亿",d.x=l.x+e.GetWidth(l)+.005*gh,d.y=l.y+e.GetHeight(l)-e.GetHeight(d),i}this.touchEnabled=!0,this.bgLayer=new egret.Sprite,this.addChild(this.bgLayer),this.winLayer=new egret.Sprite,this.addChild(this.winLayer),this.fgLayer=new egret.Sprite,this.addChild(this.fgLayer),this.rankShape=e.makeaShape(0,.7),this.bgLayer.addChild(this.rankShape);var i=e.createBitmapByName("rankbg_png");this.winLayer.addChild(i),i.x=gw/2-e.GetWidth(i)/2,i.y=.091*gh;var r=new egret.Sprite;this.winLayer.addChild(r),r.y=.22*gh;var n=new egret.TextField;r.addChild(n),e.textScaleFun(n,.024,5987164),n.bold=!0,n.text="未上榜",n.x=gw/2-.098*gh;var h=new egret.TextField;r.addChild(h),e.textScaleFun(h,.026),h.bold=!0,h.stroke=3,h.strokeColor=0,h.text="0",h.x=gw/2+.15*gh-e.GetWidth(h)/2;var g=new egret.TextField;this.winLayer.addChild(g),e.textScaleFun(g,.024,615304),g.bold=!0,g.text="正在获取排行榜...",g.x=gw/2-e.GetWidth(g)/2,g.y=.4*gh,e.showloading(),this.rankData?t.call(this,this.rankData):e.getRanklistAjax(function(e){t.call(this,e)},function(t){e.hideloading(),e.LAlert(t.msg),g.text=t.msg,g.x=gw/2-e.GetWidth(g)/2},this);var o=e.createBitmapByName("closeBtn_png");e.BtnMode(o),o.x=gw/2,o.y=.89*gh,o.addEventListener(egret.TouchEvent.TOUCH_TAP,this.rankCloseFun,this),e.removedListener(o,egret.TouchEvent.TOUCH_TAP,this.rankCloseFun,this),e.winEnterAni(this.rankShape,this.winLayer,"scale01")},a.prototype.rankCloseFun=function(){var t=this;this.callback&&this.callback.call(this.thisObj),e.winCloseAni(this.rankShape,this.winLayer,"scale01",function(){e.LremoveChild(t)},this)},a.prototype.removedFun=function(){},a}(egret.DisplayObjectContainer);e.LRankPage=t,__reflect(t.prototype,"Lgs.LRankPage")}(Lgs||(Lgs={}));var Lgs;!function(e){var t=function(){function e(){this.shotScale=1,this.drawRecet=new egret.Rectangle(0,0,gw,gh),this.renderTexture=new egret.RenderTexture}return e.prototype.saveIMG=function(e,t,a,i){a&&(this.drawRecet=a),i&&(this.shotScale=i),this.renderTexture.drawToTexture(e,this.drawRecet,this.shotScale),"png"==t?this.renderTexture.saveToFile("image/png","download.png",this.drawRecet):"jpg"==t&&this.renderTexture.saveToFile("image/jpeg","download.jpg",this.drawRecet)},e.prototype.creatShotBitmap=function(e,t,a,i){a&&(this.drawRecet=a),i&&(this.shotScale=i),this.renderTexture.drawToTexture(e,this.drawRecet,this.shotScale);var r=new egret.Bitmap;return r.texture=this.renderTexture,r},e.prototype.addShareImg=function(e,t,a,i){a&&(this.drawRecet=a),i&&(this.shotScale=i),this.renderTexture.drawToTexture(e,this.drawRecet,this.shotScale);var r=this.renderTexture.toDataURL("image/jpeg",new egret.Rectangle(0,0,750,1206)),n=$(".shareImg");n.attr("src",r)},e}();e.LScreenShot=t,__reflect(t.prototype,"Lgs.LScreenShot")}(Lgs||(Lgs={}));var canShake=1,SHAKE_THRESHOLD=5,last_update=1,Shakex,Shakey,Shakez,last_x,last_y,last_z;Shakex=Shakey=Shakez=last_x=last_y=last_z=0;var shakeobj,fangxiang=1;isiOS||(fangxiang=-1);var Lgs;!function(e){function t(e,t){GameLayer&&e&&GameLayer.dispatchEventWith("onShake",!1,e)}function a(e){var a=e.accelerationIncludingGravity,i=(new Date).getTime();if(i-last_update>60&&1==canShake){var r=i-last_update;last_update=i,Shakex=a.x*fangxiang,Shakey=a.y*fangxiang,Shakez=a.z*fangxiang;var n=Math.abs(Shakex+Shakey+Shakez-last_x-last_y-last_z)/r*1e4;if(n>SHAKE_THRESHOLD){var h=[["speed",n],["Shakex",Shakex],["Shakey",Shakey],["Shakez",Shakez]],g=n;t(g,h)}last_x=Shakex,last_y=Shakey,last_z=Shakez}}e.shaketodo=t,e.deviceMotionHandler=a}(Lgs||(Lgs={})),$(function(){window.DeviceMotionEvent?window.addEventListener("devicemotion",Lgs.deviceMotionHandler,!1):alert("你的设备不支持DeviceMotion事件")});var Lgs;!function(e){var t=function(t){function a(e,a){var i=t.call(this,e)||this;return i.textureName=a,i}return __extends(a,t),a.produce=function(t){null==a.cacheDict[t]&&(a.cacheDict[t]=[]);var i,r=a.cacheDict[t];return r.length>0?(i=r.pop(),i.scaleX=i.scaleY=1,i.alpha=1):(i=new a(RES.getRes(t),t),e.BtnMode(i,!0),"tap1_png"==t&&(i.touchEnabled=!0)),i},a.reclaim=function(e){var t=e.textureName;null==a.cacheDict[t]&&(a.cacheDict[t]=[]);var i=a.cacheDict[t];-1==i.indexOf(e)&&i.push(e)},a}(egret.Bitmap);t.cacheDict={},e.LTap=t,__reflect(t.prototype,"Lgs.LTap")}(Lgs||(Lgs={}));var Lgs;!function(e){function t(){var t=(new Date).getTime(),a=Math.floor(t/1e3);return a>=Number(p[0])&&a<Number(p[1])?!0:-1==c?(e.LAlert("活动未开始"),e.hideloading(),!1):1==c?(e.LAlert("活动已结束"),e.hideloading(),!1):!0}function a(e){e.notActivityTime&&(c=e.activeTime),e.activeTimes&&(p=e.activeTimes)}function i(e,i,r){!d&&t()&&(d=!0,$.ajax({type:"POST",url:$serverBaseUrl+"server.php?action=startGame",data:{},dataType:"jsonp",jsonp:"callback",success:function(t){d=!1,t.success?e&&e.call(r,t):(a(t),i&&i.call(r,t))},error:function(e,t,a){d=!1,alert("服务器繁忙，请稍后再试")}}))}function r(e,i,r,n){!d&&t()&&(d=!0,$.ajax({type:"POST",url:$serverBaseUrl+"server.php?action=endGame",data:e,dataType:"jsonp",jsonp:"callback",success:function(e){d=!1,e.success?i&&i.call(n,e):(a(e),r&&r.call(n,e))},error:function(e,t,a){d=!1,alert("服务器繁忙，请稍后再试")}}))}function n(e,t,i){d||(d=!0,$.ajax({type:"POST",url:$serverBaseUrl+"server.php?action=getRank",data:{},dataType:"jsonp",contentType:"application/json",async:!0,jsonp:"callback",success:function(r){d=!1,r.success?e&&e.call(i,r):(a(r),t&&t.call(i,r))},error:function(e){d=!1,t&&t.call(i,e)}}))}function h(e,i,r,n){!d&&t()&&(d=!0,$.ajax({type:"POST",url:$serverBaseUrl+"server.php?action=setInfo",data:e,dataType:"jsonp",jsonp:"callback",success:function(e){d=!1,e.success?i&&i.call(n,e):(a(e),r&&r.call(n,e))},error:function(e,t,a){d=!1,alert("服务器繁忙，请稍后再试")}}))}function g(e,t,a){$.ajax({type:"POST",url:$serverBaseUrl+"server.php?action=share",data:{},dataType:"jsonp",jsonp:"callback",success:function(e){e.success?t&&t(e):a&&a(e)},error:function(e,t,a){alert(a)}})}function o(e,t,i){d||(d=!0,$.ajax({type:"POST",url:$serverBaseUrl+"server.php?action=getWxUserInfo",data:{code:$code,shareUrl:encodeURI(window.location.href)},dataType:"jsonp",jsonp:"callback",success:function(r){d=!1,s(r),r.success?e&&e.call(i,r):(a(r),t&&t.call(i,r))},error:function(e,t,a){d=!1,alert("服务器繁忙，请稍后再试")}}))}function s(e){wx.config({debug:!1,appId:e.appId,timestamp:e.timestamp,nonceStr:e.nonceStr,signature:e.signature,jsApiList:["checkJsApi","onMenuShareTimeline","onMenuShareAppMessage"]}),wx.ready(function(){l()}),wx.error(function(e){})}function l(t,a){t?($title=t,$desc=a):($title="英雄，来看一看隐藏在你心中的武魂！",$desc="武林风再起，武魂共天鸣，快去测一测你与武林风哪位选手拥有相同的武魂！"),$shareImg=$dirName+"/share.jpg",$link=$dirName+"/index.html",wx.onMenuShareTimeline({title:$desc,link:$link,imgUrl:$shareImg,success:function(t){g(),shareOkClose(),setTimeout(function(){e.LMsg("分享成功")},300)},cancel:function(t){setTimeout(function(){e.LMsg("您取消了分享")},300)}}),wx.onMenuShareAppMessage({title:$title,desc:$desc,link:$link,imgUrl:$shareImg,success:function(t){g(),shareOkClose(),setTimeout(function(){e.LMsg("分享成功")},300)},cancel:function(t){setTimeout(function(){e.LMsg("您取消了分享")},300)},fail:function(e){}}),wx.onMenuShareQQ({title:$title,desc:$desc,link:$link,imgUrl:$shareImg,success:function(t){shareOkClose(),setTimeout(function(){e.LMsg("分享成功")},300)},cancel:function(t){setTimeout(function(){e.LMsg("您取消了分享")},300)},fail:function(e){}}),wx.onMenuShareQZone({title:$title,desc:$desc,link:$link,imgUrl:$shareImg,success:function(e){shareOkClose()},cancel:function(e){},fail:function(e){}})}var d=!1,c=0,p=[0,1];e.IsActiveTimeFun=t,e.getActiveTimes=a,e.startGameAjax=i,e.endGameAjax=r,e.getRanklistAjax=n,e.setInfoAjax=h,e.shareAjax=g,e.getWxUserInfoAjax=o,e.setShareInfo=s,e.shareFn=l}(Lgs||(Lgs={}));var Lgs;!function(e){function t(t,a){bgmViewer.hide();var i=new egret.Sprite;i.touchEnabled=!0,shareObj=i;var r=e.makeaShape(0,.85);i.addChild(r);var n=e.createBitmapByName("sharebg_png");return i.addChild(n),n.x=gw-pw_sx-e.GetWidth(n)-.015*gh,n.y=pw_sy+.015*gh,i.once(egret.TouchEvent.TOUCH_TAP,function(){e.LremoveChild(i),bgmViewer.show()},this),i.closeAni=function(){e.LremoveChild(i),bgmViewer.show()},i}e.sharePage=t}(Lgs||(Lgs={}));var Lgs;!function(e){var t=function(){function e(){this.posScale=1.5,this.mapPoss=[new egret.Point(0*this.posScale,3*this.posScale),new egret.Point(3*this.posScale,2*this.posScale),new egret.Point(-3*this.posScale,-2*this.posScale)],this.spritePoss=[new egret.Point(5*this.posScale,0*this.posScale),new egret.Point(-5*this.posScale,0*this.posScale),new egret.Point(5*this.posScale,0*this.posScale)],this._shockLength=0,this._shockCount=0,this._rx=0,this._ry=0,this._type=0,this._repeatCount=0,this._isRunning=!1}return e.prototype.destroy=function(){this.stop(),this._target=null},e.prototype.shock=function(t){void 0===t&&(t=0),this._type=t,this._type==e.MAP?(this._shockPoss=this.mapPoss.concat(),this._shockLength=this._shockPoss.length):this._type==e.SPRITE&&(this._shockPoss=this.spritePoss.concat(),this._shockLength=this._shockPoss.length)},e.prototype.start=function(e){void 0===e&&(e=1),this._isRunning&&this.stop(),this.repeatCount=e,this._shockCount=0,this._target&&(this._isRunning=!0,this._rx=this._target.x,this._ry=this._target.y,egret.Ticker.getInstance().register(this.onShockEnter,this))},e.prototype.stop=function(){this._isRunning=!1,this._target&&(this._target.x=this._rx,this._target.y=this._ry,egret.Ticker.getInstance().unregister(this.onShockEnter,this))},e.prototype.onShockEnter=function(e){var t=this._shockLength*this._repeatCount;if(this._shockCount>=t)return void this.stop();var a=this._shockCount%this._shockLength,i=this._shockPoss[a];this._target&&(this._target.x=this._rx+i.x,this._target.y=this._ry+i.y),this._shockCount++},Object.defineProperty(e.prototype,"repeatCount",{get:function(){return this._repeatCount},set:function(e){this._repeatCount=e},enumerable:!0,configurable:!0}),e}();t.MAP=0,t.SPRITE=1,e.ShockUtils=t,__reflect(t.prototype,"Lgs.ShockUtils")}(Lgs||(Lgs={}));var Lgs;!function(e){var t=function(t){function a(e){var a=t.call(this)||this;return a.csNums=34,a.scale1=.4,a.maxJuli=.65*gh,a.minSudu=.0015*gh,a.maxSudu=.0035*gh,a.csw=.9*gw,a.canWind=!1,a.windSpeed=0,a.windSpeed2=0,a.windCount=3e3,a.windAdd=!1,a.isPlay=!0,a.mode=e,a.once(egret.Event.ADDED_TO_STAGE,a.onAddToStage,a),a.once(egret.Event.REMOVED_FROM_STAGE,a.removedFun,a),a}return __extends(a,t),a.prototype.onAddToStage=function(){function t(){for(var e=0;e<o.length;e++){var t=o[e];t.y+=t.speed2,t.rotation+=t.rs,(t.rotation>=t.r0+t.rr||t.rotation<=t.r0+t.rr)&&(t.rr=-t.rr)}if(this.canWind){if(!this.windAdd)for(var e=0;e<o.length;e++){var t=o[e];t.windSpeed>0?t.windSpeed-=1e-4*gh:t.windSpeed=0}for(var e=0;e<o.length;e++){var t=o[e];t.x+=t.windSpeed}}if(0!=this.windSpeed2)for(var e=0;e<o.length;e++){var t=o[e];t.x+=this.windSpeed2/5*4+this.windSpeed2/5*Math.random()}for(var a=function(e){var t=o[e];t.y>r.maxJuli&&egret.Tween.get(t).to({alpha:0},500).call(function(){i.call(this,t)},r)},r=this,e=0;e<o.length;e++)a(e)}function a(){for(var e=0;e<o.length;e++){var t=o[e];t.y+=1.5*t.speed2,t.rotation+=t.rs,(t.rotation>=t.r0+t.rr||t.rotation<=t.r0+t.rr)&&(t.rr=-t.rr)}for(var e=0;e<o.length;e++){var t=o[e];t.y>this.maxJuli&&egret.Tween.get(t).to({alpha:0},500)}}function i(t){var a=Math.floor(Math.random()*g.length);t.texture=RES.getRes(g[a]),t.scaleX=t.scaleY=initScale*(this.scale1+Math.random()),t.rotation=180*Math.random(),t.x=(gw-this.csw)/2+Math.random()*this.csw,t.y=pw_sy-2*e.GetHeight(t),t.speed2=Math.random()*this.maxSudu+this.minSudu,t.r0=t.rotation,t.rr=20+20*Math.random();var i=Math.floor(2*Math.random());0==i?t.rs=3:t.rs=-3,t.alpha=1}function r(){var e=parseInt(2*Math.random()+"");1==e?this.windSpeed=-gh*Math.random()*.003:this.windSpeed=gh*Math.random()*.003;for(var t=0;t<o.length;t++){var a=o[t];a.windSpeed=this.windSpeed}this.windAdd=!0,egret.setTimeout(function(){this.windSpeed=0,this.windAdd=!1,this.isPlay&&(this.windCount=6e3+3e3*Math.random(),egret.setTimeout(r,this,this.windCount))},this,3e3)}var n=new egret.Sprite;this.addChild(n);var h=new egret.Sprite;this.addChild(h);for(var g=["cd1_png","cd2_png","cd3_png","cd4_png"],o=[],s=0;s<this.csNums;s++){var l=Math.floor(Math.random()*g.length),d=e.createBitmapByName(g[l]);n.addChild(d),d.scaleX=d.scaleY=initScale*(this.scale1+Math.random()),d.rotation=180*Math.random(),d.x=(gw-this.csw)/2+Math.random()*this.csw,d.y=-e.GetHeight(d)-.1*gh+Math.random()*this.maxJuli,d.speed2=Math.random()*this.maxSudu+this.minSudu,d.r0=d.rotation,d.rr=20+20*Math.random();var c=Math.floor(2*Math.random());0==c?d.rs=3:d.rs=-3,o.push(d)}"boom"==this.mode?(this.addEventListener(egret.Event.ENTER_FRAME,a,this),e.removedListener(this,egret.Event.ENTER_FRAME,a,this),this.onframe=a):"snowing"==this.mode&&(this.addEventListener(egret.Event.ENTER_FRAME,t,this),e.removedListener(this,egret.Event.ENTER_FRAME,t,this),this.onframe=t),this.canWind&&egret.setTimeout(r,this,this.windCount),this.winFun=r},a.prototype.play=function(){this.isPlay||(this.isPlay=!0,this.addEventListener(egret.Event.ENTER_FRAME,this.onframe,this),this.canWind&&(this.windCount=6e3+3e3*Math.random(),egret.setTimeout(this.winFun,this,this.windCount)))},a.prototype.pause=function(){this.isPlay&&(this.isPlay=!1,this.removeEventListener(egret.Event.ENTER_FRAME,this.onframe,this))},a.prototype.removedFun=function(){this.removeEventListener(egret.Event.ENTER_FRAME,this.onframe,this)},a}(egret.DisplayObjectContainer);e.snowing=t,__reflect(t.prototype,"Lgs.snowing")}(Lgs||(Lgs={}));var shareObj=new egret.Sprite,$thisLevel=0,openGame1=!1,$titleJson,$cid,ajax1=!0,Lgs;!function(e){var t=function(t){function a(e,a,i){var r=t.call(this)||this;return r.myScore=0,r.g=.9,r.downSpeed=0,r.isOver1=!1,r.isOver2=!1,r.isOver3=!1,r.isOver4=!1,r.gs1=0,r.gs2=0,r.gs3=0,r.gs4=0,a&&(r.callback=a,r.thisObj=i),r.startData=e,r.firstgame=e.firstgame,r.once(egret.Event.ADDED_TO_STAGE,r.onAddToStage,r),r.once(egret.Event.REMOVED_FROM_STAGE,r.removedFun,r),r}return __extends(a,t),a.prototype.onAddToStage=function(){this.touchEnabled=!0;var e=new egret.Sprite;this.addChild(e);var t=new egret.Sprite;this.addChild(t),this.descView1()},a.prototype.descView1=function(t,a,i){function r(){n.removeEventListener(egret.TouchEvent.TOUCH_TAP,r,this),egret.Tween.get(n).to({alpha:.3},500).call(function(){e.LremoveChild(n),this.game1()},this)}var n=new egret.Sprite;GameLayer.addChild(n),n.touchEnabled=!0;var h=e.createBitmapByName("g1_hbg_jpg","bg");n.addChild(h);var g=e.createBitmapByName("g1_hbg2_png");n.addChild(g),g.x=gw/2-e.GetWidth(g)/2,g.y=.492*gh;var o=e.createBitmapByName("g1_p1_png");
n.addChild(o),o.x=gw/2-e.GetWidth(o)/2,o.y=.006*-gh;var s=e.createBitmapByName("g1_p2_png");n.addChild(s),s.x=gw/2-.255*gh,s.y=.187*gh;var l=e.createBitmapByName("g1_p3_png");n.addChild(l),l.x=gw/2-.145*gh,l.y=.185*gh;var d=e.createBitmapByName("g1_p4_png");n.addChild(d),d.x=gw/2-e.GetWidth(d)/2,d.y=.733*gh;var c=e.createBitmapByName("g1_p5_png");n.addChild(c),c.x=gw/2-e.GetWidth(c)/2,c.y=.9*gh,c.alpha=0,o.alpha=0,egret.Tween.get(o).to({alpha:1},500);var p=s.x;s.alpha=0,s.x=gw/2+.255*gh,egret.Tween.get(s).to({x:p},500,egret.Ease.backOut),egret.Tween.get(s).to({alpha:1},500),e.BtnMode(l,!0);var u=l.x,v=l.y;l.x=u+.25*gh,l.y=v-.1*gh,l.alpha=0,l.scaleX=l.scaleY=2,egret.Tween.get(l).wait(820).to({scaleX:1,scaleY:1,x:u,y:v},320,egret.Ease.backOut),egret.Tween.get(l).wait(820).to({alpha:1},320).call(function(){e.removedTweens(c),egret.Tween.get(c).to({alpha:.5}).call(function(){egret.Tween.get(c,{loop:!0}).to({alpha:1},500).to({alpha:.5},500)},this),n.addEventListener(egret.TouchEvent.TOUCH_TAP,r,this)},this);var m=d.y;d.y=gh-pw_sy,egret.Tween.get(d).wait(500).to({y:m},320,egret.Ease.backOut),n.addEventListener(egret.TouchEvent.TOUCH_TAP,r,this)},a.prototype.descView2=function(t,a,i){function r(){n.removeEventListener(egret.TouchEvent.TOUCH_TAP,r,this),egret.Tween.get(n).to({alpha:.3},500).call(function(){e.LremoveChild(n),this.game2()},this)}var n=new egret.Sprite;GameLayer.addChild(n),n.touchEnabled=!0;var h=e.createBitmapByName("g1_hbg_jpg","bg");n.addChild(h);var g=e.createBitmapByName("g1_hbg2_png");n.addChild(g),g.x=gw/2-e.GetWidth(g)/2,g.y=.492*gh;var o=e.createBitmapByName("g2_p1_png");n.addChild(o),o.x=gw/2-e.GetWidth(o)/2,o.y=.006*-gh;var s=e.createBitmapByName("g2_p2_png");n.addChild(s),s.x=gw/2-.255*gh,s.y=.187*gh;var l=e.createBitmapByName("g2_p3_png");n.addChild(l),l.x=gw/2-.255*gh,l.y=.11*gh;var d=e.createBitmapByName("g2_p4_png");n.addChild(d),d.x=gw/2-e.GetWidth(d)/2+.012*gh,d.y=.76*gh;var c=e.createBitmapByName("g2_p5_png");n.addChild(c),c.x=gw/2-e.GetWidth(c)/2+.01*gh,c.y=.885*gh,c.alpha=0,o.alpha=0,egret.Tween.get(o).to({alpha:1},500);var p=s.x;s.alpha=0,s.x=gw/2+.255*gh,egret.Tween.get(s).to({x:p},500,egret.Ease.backOut),egret.Tween.get(s).to({alpha:1},500),e.BtnMode(l,!0);var u=l.x,v=l.y;l.x=u+.25*gh,l.y=v-.1*gh,l.alpha=0,l.scaleX=l.scaleY=2,egret.Tween.get(l).wait(820).to({scaleX:1,scaleY:1,x:u,y:v},320,egret.Ease.backOut),egret.Tween.get(l).wait(820).to({alpha:1},320).call(function(){e.removedTweens(c),egret.Tween.get(c).to({alpha:.5}).call(function(){egret.Tween.get(c,{loop:!0}).to({alpha:1},500).to({alpha:.5},500)},this),n.addEventListener(egret.TouchEvent.TOUCH_TAP,r,this)},this);var m=d.y;d.y=gh-pw_sy,egret.Tween.get(d).wait(500).to({y:m},320,egret.Ease.backOut),n.addEventListener(egret.TouchEvent.TOUCH_TAP,r,this)},a.prototype.descView3=function(t,a,i){function r(){n.removeEventListener(egret.TouchEvent.TOUCH_TAP,r,this),egret.Tween.get(n).to({alpha:.3},500).call(function(){e.LremoveChild(n),this.game3()},this)}var n=new egret.Sprite;GameLayer.addChild(n),n.touchEnabled=!0;var h=e.createBitmapByName("g1_hbg_jpg","bg");n.addChild(h);var g=e.createBitmapByName("g1_hbg2_png");n.addChild(g),g.x=gw/2-e.GetWidth(g)/2,g.y=.492*gh;var o=e.createBitmapByName("g3_p1_png");n.addChild(o),o.x=gw/2-e.GetWidth(o)/2,o.y=.001*gh;var s=e.createBitmapByName("g3_p2_png");n.addChild(s),s.x=gw/2-.255*gh,s.y=.187*gh;var l=e.createBitmapByName("g3_p3_png");n.addChild(l),l.x=gw/2-.232*gh,l.y=.24*gh;var d=e.createBitmapByName("g3_p4_png");n.addChild(d),d.x=gw/2-e.GetWidth(d)/2,d.y=.748*gh;var c=e.createBitmapByName("g3_p5_png");n.addChild(c),c.x=gw/2-e.GetWidth(c)/2,c.y=.84*gh,c.alpha=0,o.alpha=0,egret.Tween.get(o).to({alpha:1},500);var p=s.x;s.alpha=0,s.x=gw/2+.255*gh,egret.Tween.get(s).to({x:p},500,egret.Ease.backOut),egret.Tween.get(s).to({alpha:1},500),e.BtnMode(l,!0);var u=l.x,v=l.y;l.x=u+.25*gh,l.y=v-.1*gh,l.alpha=0,l.scaleX=l.scaleY=2,egret.Tween.get(l).wait(820).to({scaleX:1,scaleY:1,x:u,y:v},320,egret.Ease.backOut),egret.Tween.get(l).wait(820).to({alpha:1},320).call(function(){e.removedTweens(c),egret.Tween.get(c).to({alpha:.5}).call(function(){egret.Tween.get(c,{loop:!0}).to({alpha:1},500).to({alpha:.5},500)},this),n.addEventListener(egret.TouchEvent.TOUCH_TAP,r,this)},this);var m=d.y;d.y=gh-pw_sy,egret.Tween.get(d).wait(500).to({y:m},320,egret.Ease.backOut)},a.prototype.game1=function(){function t(t){if(!b){playAudio("g1m",0,!0),b=!0,B+=1;var a=t.currentTarget;egret.Tween.get(a).to({scaleX:2,scaleY:2,alpha:0},100).call(function(){e.LremoveChild(w),e.LTap.reclaim(a)},this)}}function a(t){if(!b){b=!0,e.LremoveChild(w),S+=1e3;var a=e.LTap.produce("tapX_png");o.addChild(a),a.x=t.stageX,a.y=t.stageY,a.alpha=0,a.scaleX=a.scaleY=2,O.push(a),egret.Tween.get(a).to({scaleX:1,scaleY:1,alpha:1},100,egret.Ease.backOut)}}function i(){b=!0;for(var a=0;a<O.length;a++){var r=O[a];e.LremoveChild(r),O.splice(a,1),a--}var n=e.LTap.produce("tap1_png");o.addChild(n),n.addEventListener(egret.TouchEvent.TOUCH_TAP,t,this),e.removedListener(n,egret.TouchEvent.TOUCH_TAP,t,this),w=n,e.removedTweens(n),egret.Tween.get(n,{loop:!0}).to({alpha:.5},200).to({alpha:1},200);var h=Math.floor(Math.random()*x.length),g=x[h];switch(m.texture=RES.getRes(T[g]),x.splice(h,1),x.length<1&&(x=[0,1,2,3,4,5]),g){case 0:n.x=gw/2+.185*gh,n.y=.805*gh;break;case 1:n.x=gw/2-.2*gh,n.y=.58*gh;break;case 2:n.x=gw/2+.21*gh,n.y=.63*gh;break;case 3:n.x=gw/2+.18*gh,n.y=.335*gh;break;case 4:n.x=gw/2-.195*gh,n.y=.762*gh;break;case 5:n.x=gw/2-.19*gh,n.y=.397*gh}b=!1,_=egret.getTimer();var s=_-E+S;L=Math.max(500,1300-s*(1300/f)),egret.setTimeout(function(){e.LremoveChild(n),this.isOver1||i.call(this)},this,L)}function r(){var t=0,a=[];for(t=0;3>t;t++){var i=e.LTap.produce("tap1_png");a.push(i)}for(t=0;3>t;t++)i=a.pop(),e.LTap.reclaim(i);for(t=0;3>t;t++){var r=e.LTap.produce("tapX_png");a.push(r)}for(t=0;3>t;t++)r=a.pop(),e.LTap.reclaim(r)}function n(){_=egret.getTimer(),C=_-E+S;var t=Math.ceil((f-C)/1e3);0>=t&&(t=0,C=f,this.isOver1||(this.isOver1=!0,d.removeEventListener(egret.Event.ENTER_FRAME,n,this),e.LremoveChild(y),e.LremoveChild(w),this.gs1=B,this.result1(function(){e.LremoveChild(h)},this))),c.text=t+"s",v.x=u.x-(u.x-(gw/2-.5*gh))*C/f}var h=new egret.Sprite;this.addChild(h);var g=new egret.Sprite;h.addChild(g);var o=new egret.Sprite;h.addChild(o);var s=e.createBitmapByName("g1bg_jpg","bg");g.addChild(s);var l=e.createBitmapByName("g1fg_png");o.addChild(l),l.scaleX=l.scaleY=2,l.x=gw/2-e.GetWidth(l)/2,l.y=gh/2-e.GetHeight(l)/2;var d=new egret.Sprite;g.addChild(d),d.y=.07*gh;var c=new egret.BitmapText;d.addChild(c),c.font=RES.getRes("nums_fnt"),c.text="15s",c.x=gw/2-e.GetWidth(c)/2;var p=e.createBitmapByName("countbg_png");d.addChild(p),p.x=gw/2-e.GetWidth(p)/2,p.y=74;var u=e.createBitmapByName("countfg_png");d.addChild(u),u.x=gw/2-e.GetWidth(u)/2,u.y=74;var v=e.createBitmapByName("countfg_png");d.addChild(v),v.x=gw/2-.5*gh,v.y=74,u.mask=v;var m=e.createBitmapByName("g1ready_png");g.addChild(m),m.x=gw/2-e.GetWidth(m)/2,m.y=.282*gh;var y=e.makeaShape(0,0);o.addChild(y),y.touchEnabled=!0;var w,T=["g1_act1_png","g1_act2_png","g1_act3_png","g1_act4_png","g1_act5_png","g1_act6_png"],x=[0,1,2,3,4,5],f=15e3,E=0,_=0,C=0,S=0,L=1300,b=!1,B=0,O=[];egret.setTimeout(function(){i.call(this),E=egret.getTimer(),y.addEventListener(egret.TouchEvent.TOUCH_TAP,a,this),e.removedListener(y,egret.TouchEvent.TOUCH_TAP,a,this),d.addEventListener(egret.Event.ENTER_FRAME,n,this),e.removedListener(d,egret.Event.ENTER_FRAME,n,this)},this,320),r.call(this)},a.prototype.result1=function(t,a){function i(){w.removeEventListener(egret.TouchEvent.TOUCH_TAP,i,this),t&&t.call(a),e.LremoveChild(r),this.descView2()}var r=new egret.Sprite;this.addChild(r);var n=e.makeaShape(16777215,.4);r.addChild(n);var h=e.createBitmapByName("r_1_png");r.addChild(h),h.x=gw/2-.025*gh,h.y=.097*-gh;var g=e.createBitmapByName("r_2_png");r.addChild(g),g.x=gw/2-.34*gh,g.y=.604*gh;var o=e.createBitmapByName("rbg_png");r.addChild(o),o.x=gw/2-.262*gh,o.y=.298*gh;var s=new egret.Sprite;r.addChild(s);var l=e.createBitmapByName("r_headbg_png");s.addChild(l);var d=new egret.Shape;s.addChild(d),d.graphics.beginFill(16711680),d.graphics.drawCircle(0,0,69),d.graphics.endFill(),d.x=.0722*gh,d.y=.0606*gh,e.addBitmapByUrl(d.x-69,d.y-69,138,s,$headImg,"headImg",function(e){e.mask=d},this),s.x=gw/2-.2*gh,s.y=.283*gh;var c=new egret.TextField;r.addChild(c),e.textScaleFun(c,.025,16777215),c.text=$nickName,c.bold=!0,c.x=gw/2+.01*gh-e.GetWidth(c)/2,c.y=.362*gh;var p=e.createBitmapByName("r1_textbg_png");r.addChild(p),p.x=gw/2-e.GetWidth(p)/2,p.y=.445*gh;var u=new egret.Sprite;r.addChild(u);var v=e.createBitmapByName("r1_text1_png");u.addChild(v);var m=new egret.TextField;u.addChild(m),e.textScaleFun(m,.04,15918282),m.bold=!0,m.text=this.gs1+"";var y=e.createBitmapByName("r1_text2_png");u.addChild(y),m.x=v.x+e.GetWidth(v)+.01*gh,m.y=e.GetHeight(v)-e.GetHeight(m)-2,y.x=m.x+e.GetWidth(m)+.01*gh,u.x=gw/2-e.GetWidth(u)/2,u.y=.504*gh;var w=e.createBitmapByName("start2Btn_png");r.addChild(w),e.BtnMode(w),w.x=gw/2-.005*gh,w.y=.705*gh,egret.setTimeout(function(){w.addEventListener(egret.TouchEvent.TOUCH_TAP,i,this),e.removedListener(w,egret.TouchEvent.TOUCH_TAP,i,this)},this,1e3)},a.prototype.game2=function(){function t(){_=egret.getTimer(),C=_-E;var r=Math.ceil((f-C)/1e3);0>=r&&(r=0,C=f,this.isOver2||(this.isOver2=!0,o.removeEventListener(egret.Event.ENTER_FRAME,t,this),GameLayer.removeEventListener("onShake",a,this),this.gs2=L,this.result2(function(){e.LremoveChild(i)},this))),s.text=r+"s",c.x=d.x-(d.x-(gw/2-.5*gh))*C/f}function a(e){L=Math.max(L,Math.floor(e.data/1e3)),S++,S%2==1?p.texture=RES.getRes("g2_act2_png"):p.texture=RES.getRes("g2_act1_png")}var i=new egret.Sprite;this.addChild(i);var r=new egret.Sprite;i.addChild(r);var n=new egret.Sprite;i.addChild(n);var h=e.createBitmapByName("g1bg_jpg","bg");r.addChild(h);var g=e.createBitmapByName("g1fg_png");n.addChild(g),g.scaleX=g.scaleY=2,g.x=gw/2-e.GetWidth(g)/2,g.y=gh/2-e.GetHeight(g)/2;var o=new egret.Sprite;n.addChild(o),o.y=.07*gh;var s=new egret.BitmapText;o.addChild(s),s.font=RES.getRes("nums_fnt"),s.text="3s",s.x=gw/2-e.GetWidth(s)/2;var l=e.createBitmapByName("countbg_png");o.addChild(l),l.x=gw/2-e.GetWidth(l)/2,l.y=74;var d=e.createBitmapByName("countfg_png");o.addChild(d),d.x=gw/2-e.GetWidth(d)/2,d.y=74;var c=e.createBitmapByName("countfg_png");o.addChild(c),c.x=gw/2-.5*gh,c.y=74,d.mask=c;var p=e.createBitmapByName("g2_act1_png");r.addChild(p),p.x=pw_sx,p.y=.22*gh;var u=new egret.Sprite;n.addChild(u);var v=e.createBitmapByName("g2_readybg_jpg","bg");u.addChild(v);var m=e.createBitmapByName("g2_num3_png");u.addChild(m),m.x=gw/2-e.GetWidth(m)/2,m.y=.295*gh,e.BtnMode(m,!0);var y=e.createBitmapByName("g2_go_png");u.addChild(y),y.x=gw/2-e.GetWidth(y)/2,y.y=.295*gh,e.BtnMode(y,!0),y.alpha=0;var w=["g2_num3_png","g2_num2_png","g2_num1_png","g2_go_png"],T=0;egret.Tween.get(m).wait(50).to({scaleX:2,scaleY:2,alpha:0},700);var x=egret.setInterval(function(){T++,m.texture=RES.getRes(w[T]),m.scaleX=m.scaleY=1,m.alpha=1,T>=w.length-1?(egret.clearInterval(x),m.scaleX=m.scaleY=.5,egret.Tween.get(m).to({scaleX:1,scaleY:1},300,egret.Ease.quadIn).call(function(){y.alpha=1,y.scaleX=y.scaleY=1,egret.Tween.get(y).to({scaleX:2,scaleY:2,alpha:0},400,egret.Ease.quadOut),egret.Tween.get(u).to({alpha:0},400,egret.Ease.quadOut).call(function(){e.LremoveChild(u),playAudio("g2m",0),E=egret.getTimer(),o.addEventListener(egret.Event.ENTER_FRAME,t,this),e.removedListener(o,egret.Event.ENTER_FRAME,t,this),GameLayer.addEventListener("onShake",a,this)},this)},this)):egret.Tween.get(m).wait(50).to({scaleX:2,scaleY:2,alpha:0},700)},this,1e3),f=3e3,E=egret.getTimer(),_=0,C=0,S=0,L=0},a.prototype.result2=function(t,a){function i(){y.removeEventListener(egret.TouchEvent.TOUCH_TAP,i,this),e.LremoveChild(r),t&&t.call(a),this.descView3()}var r=new egret.Sprite;this.addChild(r);var n=e.makeaShape(16777215,.4);r.addChild(n);var h=e.createBitmapByName("r_1_png");r.addChild(h),h.x=gw/2-.025*gh,h.y=.097*-gh;var g=e.createBitmapByName("r_2_png");r.addChild(g),g.x=gw/2-.34*gh,g.y=.604*gh;var o=e.createBitmapByName("rbg_png");r.addChild(o),o.x=gw/2-.262*gh,o.y=.298*gh;var s=new egret.Sprite;r.addChild(s);var l=e.createBitmapByName("r_headbg_png");s.addChild(l);var d=new egret.Shape;s.addChild(d),d.graphics.beginFill(16711680),d.graphics.drawCircle(0,0,69),d.graphics.endFill(),d.x=.0722*gh,d.y=.0606*gh,e.addBitmapByUrl(d.x-69,d.y-69,138,s,$headImg,"headImg",function(e){e.mask=d},this),s.x=gw/2-.2*gh,s.y=.283*gh;var c=new egret.TextField;r.addChild(c),e.textScaleFun(c,.025,16777215),c.text=$nickName,c.bold=!0,c.x=gw/2+.01*gh-e.GetWidth(c)/2,c.y=.362*gh;var p=e.createBitmapByName("r2_textbg_png");r.addChild(p),p.x=gw/2-e.GetWidth(p)/2,p.y=.446*gh;var u=new egret.Sprite;r.addChild(u);var v=new egret.TextField;u.addChild(v),e.textScaleFun(v,.04,15918282),v.bold=!0,v.text=this.gs2+"";var m=e.createBitmapByName("r2_text2_png");u.addChild(m),v.y=e.GetHeight(m)-e.GetHeight(v)-2,m.x=v.x+e.GetWidth(v)+.01*gh,u.x=gw/2-e.GetWidth(u)/2,u.y=.505*gh;var y=e.createBitmapByName("start3Btn_png");r.addChild(y),e.BtnMode(y),y.x=gw/2-.005*gh,y.y=.705*gh,y.addEventListener(egret.TouchEvent.TOUCH_TAP,i,this),e.removedListener(y,egret.TouchEvent.TOUCH_TAP,i,this)},a.prototype.game3=function(){function t(t){1==t?T--:x--;var a=S,i=f;2==t&&(a=L,i=E);var r=a[0];a.splice(0,1),r.texture=RES.getRes("blood3_png");var n=new e.ShockUtils;n.shock(e.ShockUtils.MAP);var h=10;if(n._target=i,n.start(h),1==t){var g=e.createBitmapByName("red_light_png");s.addChild(g),egret.Tween.get(g).to({alpha:1},100).to({alpha:.6},100).to({alpha:1},100).to({alpha:.6},100).to({alpha:1},100).to({alpha:.6},100).to({alpha:1},100).to({alpha:.6},100).to({alpha:1},100).to({alpha:0},100)}}function a(){var t=new egret.Sprite;s.addChild(t),G=t;var a=e.LTap.produce("tap2_png");t.addChild(a),e.BtnMode(a),a.addEventListener(egret.TouchEvent.TOUCH_TAP,i,this),e.removedListener(a,egret.TouchEvent.TOUCH_TAP,i,this),e.removedTweens(t),egret.Tween.get(t,{loop:!0}).to({alpha:.5},200).to({alpha:1},200);var r="g3_act"+M+"_png";switch(w.texture=RES.getRes(r),r){case"g3_act1_png":y.alpha=0,w.alpha=1,a.x=gw/2+.14*gh,a.y=.73*gh;break;case"g3_act2_png":a.x=gw/2-.137*gh,a.y=.55*gh;break;case"g3_act3_png":a.x=gw/2+.205*gh,a.y=.44*gh}var n=new egret.TextField;t.addChild(n),e.textScaleFun(n,.042,10952992),n.bold=!0,n.text=A+"",e.BtnMode(n,!0),n.x=a.x+.005*gh,n.y=a.y-.003*gh,R=n}function i(h){var g=h.currentTarget;playAudio("g3m",0,!0),A--,R.text=A+"",A>0?(R.anchorOffsetX=R.width/2,R.anchorOffsetY=R.height/2,R.x=g.x+.005*gh,R.y=g.y-.003*gh):(t.call(this,2),M++,e.LremoveChild(G),3>=M?(k=N,A=6+Math.floor(10*Math.random()),a.call(this),F=egret.getTimer(),c.addEventListener(egret.Event.ENTER_FRAME,r,this)):M>3&&n.call(this),g.removeEventListener(egret.TouchEvent.TOUCH_TAP,i,this))}function r(){j=egret.getTimer(),H=j-F;var i=Math.ceil((k-H)/1e3);0>=i&&(i=0,H=k,t.call(this,1),M++,3>=M?(e.LremoveChild(G),k=N,A=6+Math.floor(10*Math.random()),a.call(this),F=egret.getTimer(),c.addEventListener(egret.Event.ENTER_FRAME,r,this)):M>3&&n.call(this)),p.text=i+"s",m.x=v.x-(v.x-(gw/2-.5*gh))*H/k}function n(){this.isOver3||(this.isOver3=!0,c.removeEventListener(egret.Event.ENTER_FRAME,r,this),this.gs3=50*(3-x),T>x?(h.call(this),e.LremoveChild(c)):(e.LremoveChild(c),e.LremoveChild(w),e.LremoveChild(f),e.LremoveChild(E),e.LremoveChild(G),this.resultFun(!0)))}function h(){var t=e.createBitmapByName("jsText_png");s.addChild(t),t.x=gw/2-.31*gh,t.y=.076*gh;var a=e.createBitmapByName("jsText_png");s.addChild(a),a.x=gw/2-.31*gh,a.y=.076*gh,a.alpha=0,w.alpha=0,y.alpha=1,y.texture=RES.getRes("ready2_png"),e.BtnMode(t,!0),t.scaleX=t.scaleY=0,e.BtnMode(a,!0),egret.Tween.get(t).to({alpha:1,scaleX:1,scaleY:1},320,egret.Ease.quadIn).call(function(){a.alpha=1,egret.Tween.get(a).to({scaleX:2,scaleY:2,alpha:0},500,egret.Ease.quadOut).call(function(){this.game4(),e.LremoveChild(g)},this)},this)}var g=new egret.Sprite;this.addChild(g);var o=new egret.Sprite;g.addChild(o);var s=new egret.Sprite;g.addChild(s);var l=e.createBitmapByName("g1bg_jpg","bg");o.addChild(l);var d=e.createBitmapByName("g1fg_png");s.addChild(d),d.scaleX=d.scaleY=2,d.x=gw/2-e.GetWidth(d)/2,d.y=gh/2-e.GetHeight(d)/2;var c=new egret.Sprite;s.addChild(c),c.y=.07*gh;var p=new egret.BitmapText;c.addChild(p),p.font=RES.getRes("nums_fnt"),p.text="3s",p.x=gw/2-e.GetWidth(p)/2;var u=e.createBitmapByName("countbg_png");c.addChild(u),u.x=gw/2-e.GetWidth(u)/2,u.y=74;var v=e.createBitmapByName("countfg_png");c.addChild(v),v.x=gw/2-e.GetWidth(v)/2,v.y=74;var m=e.createBitmapByName("countfg_png");c.addChild(m),m.x=gw/2-.5*gh,m.y=74,v.mask=m;var y=e.createBitmapByName("ready1_png");o.addChild(y),y.x=gw/2-.255*gh,y.y=.2*gh;var w=e.createBitmapByName("g3_act1_png");o.addChild(w),w.x=gw/2-.25*gh,w.y=.195*gh,w.alpha=0;var T=3,x=3,f=new egret.Sprite;s.addChild(f);var E=new egret.Sprite;s.addChild(E);var _=e.createBitmapByName("bloodbg1_png");f.addChild(_),_.x=pw_sx-.02*gh,_.y=0;var C=e.createBitmapByName("bloodbg2_png");E.addChild(C),C.x=gw-e.GetWidth(C)+.02*gh,C.y=0;for(var S=[],L=[],b=0;3>b;b++){var B=e.createBitmapByName("blood1_png");f.addChild(B),B.x=pw_sx+.06*gh-21*b,B.y=.043*gh;var O=e.createBitmapByName("blood2_png");E.addChild(O),O.x=gw-.06*gh-e.GetWidth(O)+21*b,O.y=.043*gh,S.push(B),L.push(O)}var G,R,M=1,A=6+Math.floor(10*Math.random()),N=3e3,k=N,F=0,j=0,H=0;egret.setTimeout(function(){y.texture=RES.getRes("ready2_png"),egret.setTimeout(function(){a.call(this),F=egret.getTimer(),c.addEventListener(egret.Event.ENTER_FRAME,r,this),e.removedListener(c,egret.Event.ENTER_FRAME,r,this)},this,320)},this,320)},a.prototype.game4=function(){function t(){y++,y%2==1?(playAudio("g3m",0,!0),p.texture=RES.getRes("jsact2_png")):p.texture=RES.getRes("jsact1_png")}function a(){x=egret.getTimer(),f=x-T;var r=Math.ceil((w-f)/1e3);0>=r&&(r=0,f=w,this.isOver4||(this.isOver4=!0,o.removeEventListener(egret.Event.ENTER_FRAME,a,this),v.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,t,this),v.removeEventListener(egret.TouchEvent.TOUCH_END,t,this),this.gs4=10*Math.ceil(y/2),e.LremoveChild(i),this.resultFun(!1))),s.text=r+"s",c.x=d.x-(d.x-(gw/2-.5*gh))*f/w}var i=new egret.Sprite;this.addChild(i);var r=new egret.Sprite;i.addChild(r);var n=new egret.Sprite;i.addChild(n);var h=e.createBitmapByName("g1bg_jpg","bg");r.addChild(h);var g=e.createBitmapByName("g1fg_png");n.addChild(g),g.scaleX=g.scaleY=2,g.x=gw/2-e.GetWidth(g)/2,g.y=gh/2-e.GetHeight(g)/2;var o=new egret.Sprite;n.addChild(o),o.y=.07*gh;var s=new egret.BitmapText;o.addChild(s),s.font=RES.getRes("nums_fnt"),s.text="3s",s.x=gw/2-e.GetWidth(s)/2;var l=e.createBitmapByName("countbg_png");o.addChild(l),l.x=gw/2-e.GetWidth(l)/2,l.y=74;var d=e.createBitmapByName("countfg_png");o.addChild(d),d.x=gw/2-e.GetWidth(d)/2,d.y=74;var c=e.createBitmapByName("countfg_png");o.addChild(c),c.x=gw/2-.5*gh,c.y=74,d.mask=c;var p=e.createBitmapByName("jsact1_png");r.addChild(p),p.x=gw/2-e.GetWidth(p)/2,p.y=.285*gh;var u=e.createBitmapByName("doublehit_png");r.addChild(u),u.x=gw/2-.155*gh,u.y=.305*gh;var v=e.createBitmapByName("dg1_png","bg");r.addChild(v);var m=0;egret.setInterval(function(){m++,m%2==1?v.texture=RES.getRes("dg2_png"):v.texture=RES.getRes("dg1_png")},this,120),e.BtnMode(u,!0),e.removedTweens(u),egret.Tween.get(u,{loop:!0}).to({scaleX:1.1,scaleY:1.1},120).to({scaleX:1,scaleY:1},120),v.touchEnabled=!0,v.addEventListener(egret.TouchEvent.TOUCH_BEGIN,t,this),v.addEventListener(egret.TouchEvent.TOUCH_END,t,this),e.removedListener(v,egret.TouchEvent.TOUCH_BEGIN,t,this),e.removedListener(v,egret.TouchEvent.TOUCH_END,t,this);var y=0,w=3e3,T=0,x=0,f=0;T=egret.getTimer(),o.addEventListener(egret.Event.ENTER_FRAME,a,this),e.removedListener(o,egret.Event.ENTER_FRAME,a,this)},a.prototype.onframe=function(){this.endTime=egret.getTimer(),this.g_timing2=this.endTime-this.startTime2;var e=egret.getTimer();1e3/(e-this._lastTime);this._lastTime=e},a.prototype.bloodView=function(e){},a.prototype.addScore=function(e){},a.prototype.gameHitTest=function(){},a.prototype.gameStart=function(t){this.startTime=egret.getTimer(),t&&(this.startTime2=egret.getTimer(),e.removedListener(this,egret.Event.ENTER_FRAME,this.onframe,this))},a.prototype.gamePause=function(){this.g_timing+=this.endTime-this.startTime,this.removeEventListener(egret.Event.ENTER_FRAME,this.onframe,this)},a.prototype.gameStop=function(){this.g_timing=this.endTime-this.startTime,this.removeEventListener(egret.Event.ENTER_FRAME,this.onframe,this)},a.prototype.resultFun=function(t){function a(){i.call(this,l)}function i(t){e.LremoveChild(this);var a=new e.resultPage(t);GameLayer.addChild(a)}this.myScore=10*this.gs1+this.gs2+this.gs3+this.gs4;var r=new egret.Sprite;this.addChild(r),r.touchEnabled=!0;var n=this.startData.gcode1/($cid+1),h=(10*this.gs1+this.gs2+this.gs3+this.gs4)*($cid+n+1),g=this.startData.gcode1,o=this.startData.gcode2;this.gameInfo={cs1:this.gs1,cs2:this.gs2,cs3:this.gs3,cs4:this.gs4,code1:h,code2:g,code3:o};var s={score:this.myScore,gameInfo:this.gameInfo},l={cs1:this.gs1,cs2:this.gs2,cs3:this.gs3,cs4:this.gs4,score:this.myScore,myRank:0},d={code:e.encbase64(s)};e.showloading("正在提交成绩..."),e.endGameAjax(d,function(i){if(e.hideloading(),l.myRank=i.myRank,t){playAudio("g3f",0);var n=e.makeaShape(0,0);r.addChild(n);var h=e.createBitmapByName("failBg_png");r.addChild(h),h.x=gw/2-.235*gh,h.y=.373*gh;var g=e.createBitmapByName("failBg_png");r.addChild(g),g.x=gw/2-.235*gh,g.y=.373*gh;var o=e.createBitmapByName("failText_png");r.addChild(o),o.x=gw/2-e.GetWidth(o)/2,o.y=.172*gh;var s=e.createBitmapByName("continue2_png");r.addChild(s),s.x=gw/2-e.GetWidth(s)/2,s.y=.885*gh,g.alpha=.5,egret.Tween.get(g).to({alpha:.3,x:h.x+.01*gh,y:h.y-.01*gh},1e3).to({alpha:.5,x:h.x,y:h.y},1e3);var d=o.y;o.y=d-.05*gh,o.alpha=0,egret.Tween.get(o).to({alpha:1},700),egret.Tween.get(o).to({y:d},1e3,egret.Ease.quadOut),s.alpha=1,e.removedTweens(s),egret.setTimeout(function(){egret.Tween.get(s,{loop:!0}).to({alpha:.5},500).to({alpha:1},500)},this,500),egret.setTimeout(function(){r.addEventListener(egret.TouchEvent.TOUCH_TAP,a,this),e.removedListener(r,egret.TouchEvent.TOUCH_TAP,a,this)},this,1500);var c=e.createBitmapByName("red_light_png");r.addChild(c),egret.Tween.get(c).to({alpha:1},100).to({alpha:.6},100).to({alpha:1},100).to({alpha:.6},100).to({alpha:1},100).to({alpha:.6},100).to({alpha:1},100).to({alpha:.6},100).to({alpha:1},100).to({alpha:0},100)}else{var p=e.createBitmapByName("successBg_jpg","bg");r.addChild(p);var u=e.createBitmapByName("successText_png");r.addChild(u),u.x=gw/2-e.GetWidth(u)/2,u.y=.689*gh;var v=e.createBitmapByName("continue1_png");r.addChild(v),v.x=gw/2-e.GetWidth(v)/2,v.y=.91*gh,p.alpha=0,egret.Tween.get(p).to({alpha:1},700);var m=u.y;u.y=m-.05*gh,u.alpha=0,egret.Tween.get(u).to({alpha:1},700),egret.Tween.get(u).to({y:m},1e3,egret.Ease.quadOut),v.alpha=1,e.removedTweens(v),egret.setTimeout(function(){egret.Tween.get(v,{loop:!0}).to({alpha:.5},500).to({alpha:1},500)},this,500),egret.setTimeout(function(){r.addEventListener(egret.TouchEvent.TOUCH_TAP,a,this),e.removedListener(r,egret.TouchEvent.TOUCH_TAP,a,this)},this,1500)}var y=new e.ShockUtils;y.shock(e.ShockUtils.MAP);var w=10;y._target=GameLayer,y.start(w)},function(t){e.hideloading(),e.LAlert(t.msg),e.showloading(t.msg)},this)},a.prototype.replayFun=function(){e.LremoveChild(this),e.LremoveChild(this);var t=new e.LHomePage;GameLayer.addChild(t)},a.prototype.playMusic=function(e,t,a){t=t?t:0,a=a?a:1;var i=RES.getRes(e);i.play(t,a)},a.prototype.removedFun=function(){},a}(egret.DisplayObjectContainer);e.GameContainer=t,__reflect(t.prototype,"Lgs.GameContainer")}(Lgs||(Lgs={}));var gameInfoView,LTipsArr=[],myDebug=!0,myImg2,Lgs;!function(e){function t(){function t(){for(var t=function(t){var i=r[t];e.removedTweens(i),i.alpha=.7,egret.Tween.get(i).wait(130*t).call(function(){egret.Tween.get(i,{loop:!0}).to({alpha:.1},910)},a)},a=this,i=0;i<r.length;i++)t(i)}var a=new egret.Sprite;$gameStage.addChild(a);var i=e.makeaShape(0,.4,[0,0,dw,dh]);a.addChild(i);var r=[],n=.0055*gh,h=.022*gh,g=new egret.Sprite;a.addChild(g),g.x=gw/2-.0025*gh,g.y=.436*gh;for(var o=0;8>o;o++){var s=new egret.Shape;g.addChild(s),s.graphics.beginFill(16777215),s.graphics.drawCircle(0,0,n),s.graphics.endFill();var l=e.xyFun2(2*Math.PI*((o+1)/8),h,0,0);s.x=l.x,s.y=l.y,e.removedTweens(s),r.push(s)}g.visible=!1,g.visible=!0,t.call(this)}function a(){function t(){for(var t=0;t<r.length;t++){var a=r[t];e.removedTweens(a),a.alpha=.7,egret.Tween.get(a,{loop:!0}).wait(200*t).to({alpha:0},400).to({alpha:.7},400).wait(200*(4-t))}}var a=new egret.Sprite;$gameStage.addChild(a);var i=e.makeaShape(0,.4,[0,0,dw,dh]);a.addChild(i);var r=[],n=.0055*gh,h=new egret.Sprite;a.addChild(h),h.x=gw/2-3*n*2,h.y=.34*gh;for(var g=0;5>g;g++){var o=new egret.Shape;h.addChild(o),o.graphics.beginFill(16777215),o.graphics.drawArc(0,0,n,0,2*Math.PI),o.graphics.endFill(),o.x=3*n*g,e.removedTweens(o),r.push(o)}t.call(this)}function i(){function t(){for(var t=0;t<r.length;t++){var a=r[t];a.x-=.01*gh*(a.width/127)}for(var t=0;t<r.length;t++){var a=r[t];a.x<pw_sx-e.GetWidth(a)&&(a.x=gw-pw_sx,a.y=.3*gh+gh*Math.random()*.15)}}for(var a=new egret.Sprite,i=["home_cloud_png"],r=[],n=0;10>n;n++){var h=e.createBitmapByName(i[0]);a.addChild(h),h.x=1*gw/10*(n+1),h.y=.3*gh+gh*Math.random()*.15,r.push(h)}return a.addEventListener(egret.Event.ENTER_FRAME,t,this),e.removedListener(a,egret.Event.ENTER_FRAME,t,this),a}function r(e,t,a,i,r){function h(e,t,a){return document.getElementById("QR2").complete?(n(e,t,a),!0):!1}gameDiv=document.getElementsByClassName("egret-player")[0],$("#QR").attr("src")?myImg.style.display="none":(myImg=document.createElement("img"),myImg.style.display="none"),r?myImg.src=r:myImg.src=$staticUrl+"/resource/assets/QR.png",myImg2.id="QR2",gameDiv.appendChild(myImg2);var g=egret.setInterval(function(){IsQRloadComplete=h(e,t,a),i?myImg2.style.display="block":myImg2.style.display="none",IsQRloadComplete&&egret.clearInterval(g)},this,33)}function n(e,t,a,i){var r=myImg2.width/myImg2.height;myImg2.style.height=a;var n=a.replace("%","")/100,h=n*window.innerHeight*r;myImg2.style.width=h+"px";var g=window.innerWidth/2-h/2+window.innerHeight*e,o=window.innerHeight*t;myImg2.style.left=g+"px",myImg2.style.top=o+"px",myImg2.style.position="absolute",i?myImg2.style.display="block":myImg2.style.display="none"}function h(){var t=new egret.Sprite;t.touchEnabled=!0;var a=new egret.Shape;t.addChild(a),a.graphics.beginFill(0),a.graphics.drawRect(0,0,gw,gh),a.graphics.endFill();var i=new egret.TextField;return t.addChild(i),e.textScaleFun(i,.07,16777215),i.textAlign="center",i.text="请锁定竖屏横置手机以获得最佳体验",i.x=gw/2-e.GetWidth(i)/2,i.y=gh/2-e.GetHeight(i)/2-.03*gh,t}function g(e,t,a,i,r){function n(){i&&i.call(r)}var h=e.alpha;switch(e.alpha=0,t.alpha=0,t.width=gw,t.height=gh,t.anchorOffsetX=gw/2,t.anchorOffsetY=gh/2,t.x=gw/2,t.y=gh/2,egret.Tween.get(e).to({alpha:h},320,egret.Ease.quadOut),egret.Tween.get(t).to({alpha:1},320,egret.Ease.quadOut),a){case"scale01":t.x=gw/2,t.scaleX=t.scaleY=0,egret.Tween.get(t).to({scaleX:1,scaleY:1},320,egret.Ease.backOut).call(n,r);break;case"scale21":t.x=gw/2,t.scaleX=t.scaleY=2*initScale,egret.Tween.get(t).to({scaleX:1,scaleY:1},320,egret.Ease.backOut).call(n,r);break;case"up":t.y=1.5*gh,egret.Tween.get(t).to({y:.5*gh},370,egret.Ease.quadOut).call(n,r);break;case"down":t.y=1.5*-gh,egret.Tween.get(t).to({y:.5*gh},370,egret.Ease.quadOut).call(n,r);break;case"left":t.x=1.5*gw,egret.Tween.get(t).to({x:.5*gw},320,egret.Ease.quadOut).call(n,r);break;case"right":t.x=1.5*-gw,egret.Tween.get(t).to({x:.5*gw},320,egret.Ease.quadOut).call(n,r);break;case"fadeIn":t.alpha=0,egret.Tween.get(t).to({alpha:1},320,egret.Ease.quadOut).call(n,r)}}function o(e,t,a,i,r,n){function h(){i&&i.call(r)}var g=0;switch(g=n?g:0,egret.Tween.get(e).wait(g).to({alpha:0},320),egret.Tween.get(t).wait(g).to({alpha:0},320),a){case"scale01":egret.Tween.get(t).wait(g).to({scaleX:0,scaleY:0},320,egret.Ease.backIn).call(h,r);break;case"scale21":egret.Tween.get(t).wait(g).to({scaleX:2,scaleY:2},320,egret.Ease.backIn).call(h,r);break;case"up":egret.Tween.get(t).wait(g).to({y:-gh},370,egret.Ease.backIn).call(h,r);break;case"down":egret.Tween.get(t).wait(g).to({y:gh},370,egret.Ease.backIn).call(h,r);break;case"left":egret.Tween.get(t).wait(g).to({x:-gw},320,egret.Ease.backIn).call(h,r);break;case"right":egret.Tween.get(t).wait(g).to({x:gw},320,egret.Ease.backIn).call(h,r);break;case"fadeOut":egret.Tween.get(t).wait(g).to({alpha:0},320,egret.Ease.quadOut).call(h,r)}}function s(t,a){var i=t.scaleX;t.anchorOffsetX=t.width/2,t.anchorOffsetY=t.height/2,t.x=t.x+e.GetWidth(t)/2,t.y=t.y+e.GetHeight(t)/2;var r=e.createBitmapByName("Btn33_png");e.scaleFun(r,e.GetHeight(t)/gh),t.parent.addChild(r);var n=new egret.Bitmap;n.texture=t.texture,n.scaleX=n.scaleY=.95*i,t.parent.addChild(n),n.anchorOffsetX=t.anchorOffsetX,n.anchorOffsetY=t.anchorOffsetY,n.x=t.x,n.y=t.y-.05*e.GetHeight(t),r.mask=n,r.x=n.x-e.GetWidth(t)/2-e.GetWidth(r),r.y=n.y-e.GetHeight(t)/2,r.alpha=.7,e.removedTweens(r),egret.Tween.get(r,{loop:!0}).wait(1e3).to({x:t.x+e.GetWidth(t)/2},1e3),t.once(egret.Event.REMOVED_FROM_STAGE,function(){e.LremoveChild(n),e.LremoveChild(r)},t),a||(t.touchEnabled=!0,t.addEventListener(egret.TouchEvent.TOUCH_BEGIN,function(){egret.Tween.get(t).to({scaleX:.9*i,scaleY:.9*i},100,egret.Ease.backOut).to({scaleX:i,scaleY:i},250,egret.Ease.backOut),egret.Tween.get(n).to({scaleX:.9*i,scaleY:.9*i},100,egret.Ease.backOut).to({scaleX:i,scaleY:i},250,egret.Ease.backOut)},this))}function l(t){gameInfoView&&gameInfoView.parent&&gameInfoView.parent.removeChild(gameInfoView),gameInfoView=new egret.Sprite,GameLayer.addChild(gameInfoView);var a=new egret.Shape;gameInfoView.addChild(a),a.graphics.beginFill(0),a.graphics.drawRect(0,0,gw,gh),a.graphics.endFill(),a.alpha=0;var i=new egret.Sprite;gameInfoView.addChild(i);var r=new egret.Shape;i.addChild(r);for(var n=0;n<t.length;n++){var h=new egret.TextField;h.text=t[n][0]+":",e.textScaleFun(h,.022,3355443),h.x=0,h.y=.03*gh*n,i.addChild(h);var g=new egret.TextField;g.text=t[n][1]+"",e.textScaleFun(g,.022,3355443),g.x=h.x+e.GetWidth(h)+.01*gh,g.y=h.y,i.addChild(g)}r.graphics.beginFill(16759809),r.graphics.drawRect(0,0,e.GetWidth(i)+.025*gh,e.GetHeight(i)+.025*gh),r.graphics.endFill(),r.alpha=.8,r.x=.025*-gh/2,r.y=.025*-gh/2,i.x=gw-e.GetWidth(r)+.025*gh/2,i.y=.025*gh/2}function d(t,a,i){if(!myDebug)return!1;var r=new egret.Sprite;GameLayer.parent.addChild(r),r.touchEnabled=!0;var n=new egret.TextField;a?n.text=a+":"+t+" >> "+typeof t:n.text=t+" >> "+typeof t,e.textScaleFun(n,.022,16777215),n.textAlign="center",n.width=.38*gh,n.x=gw/2-e.GetWidth(n)/2,n.y=10;var h=new egret.Shape;r.addChild(h),h.graphics.beginFill(16711680),h.graphics.drawRect(0,0,gw,e.GetHeight(n)+20),h.graphics.endFill(),h.alpha=.85,h.x=gw/2-e.GetWidth(h)/2,r.addChild(n),LTipsArr.length>0&&(r.y=LTipsArr[LTipsArr.length-1].y+e.GetHeight(LTipsArr[LTipsArr.length-1])),LTipsArr.push(r),r.touchEnabled=!0,r.once(egret.TouchEvent.TOUCH_TAP,function(){r.parent.removeChild(r),i&&i.call(this);for(var t=0;t<LTipsArr.length;t++){var a=LTipsArr[t];a.hashCode==r.hashCode&&LTipsArr.splice(t,1)}for(var t=0;t<LTipsArr.length;t++){var a=LTipsArr[t];0==t?a.y=0:a.y=LTipsArr[t-1].y+e.GetHeight(LTipsArr[t-1])}},this)}e.load1=t,e.load2=a,e.floatCloud=i,e.addQR2=r,e.setQRposition2=n,e.uprightTipsFun=h,e.winEnterAni=g,e.winCloseAni=o,e.BtnMode2=s,e.LInfoView=l,e.LTips=d}(Lgs||(Lgs={}));var Lgs;!function(e){function t(t,r,n,h,g){if(n||(n="aabb"),h||(h=[[0,0],[t.width,0],[t.width,t.height],[0,t.height]]),g||(g=[[0,0],[r.width,0],[r.width,r.height],[0,r.height]]),t.visible&&r.visible){for(var o=[],s=[],l=0;l<h.length;l++){var d=t.localToGlobal(h[l][0],h[l][1]);o.push(d)}for(var l=0;l<g.length;l++){var c=r.localToGlobal(g[l][0],g[l][1]);s.push(c)}if(e.debugDrawshape(t,3381555,o),e.debugDrawshape(r,16711680,s),"poly"==n){var p={points:o},u={points:s};return a(p,u)}if("aabb"==n){var v={xMin:o[0].x,yMin:o[1].y,xMax:o[2].x,yMax:o[3].y},m={xMin:s[0].x,yMin:s[1].y,xMax:s[2].x,yMax:s[3].y};
return i(v,m)}}return!1}function a(e,t){for(var a=0;a<e.points.length-1;a++){var i=h(e.points[a],e.points[a+1]),n=g(i),o=r(n,e,t);if(!o)return!1}for(var a=0;a<t.points.length-1;a++){var i=h(t.points[a],t.points[a+1]),n=g(i),o=r(n,e,t);if(!o)return!1}return!0}function i(e,t){return e.xMin>t.xMax?!1:e.xMax<t.xMin?!1:e.yMin>t.yMax?!1:e.yMax<t.yMin?!1:!0}function r(e,t,a){for(var i=o(t.points[0],e),r=o(t.points[0],e),h=1;h<t.points.length;h++){var g=o(t.points[h],e);g>r&&(r=g),i>g&&(i=g)}for(var s=o(a.points[0],e),l=o(a.points[0],e),h=1;h<a.points.length;h++){var g=o(a.points[h],e);g>l&&(l=g),s>g&&(s=g)}return n(i,r,s,l)?!0:!1}function n(e,t,a,i){return e>i?!1:a>t?!1:!0}function h(e,t){return new s(e.x-t.x,e.y-t.y)}function g(e){return new s(-e.y,e.x)}function o(e,t){return e.x*t.x+e.y*t.y}function s(e,t){this.x=e,this.y=t}function l(e,t){if(e.visible&&t.visible)for(var a=e.localToGlobal(0,0),i=e.localToGlobal(e.width,0),r=e.localToGlobal(e.width,e.height),n=e.localToGlobal(0,e.height),h=t.localToGlobal(0,0),g=t.localToGlobal(t.width,0),o=t.localToGlobal(t.width,t.height),s=t.localToGlobal(0,t.height),l=[a,i,r,n],d=[h,g,o,s],c=0;c<l.length;c++){var p=c+1;c==l.length-1&&(p=0);for(var u=0;u<d.length;u++){var v=u+1;u==d.length-1&&(v=0);var m=w(l[c],l[p],d[u],d[v]);if(m)return!0}}return!1}function d(e,t,a,i){if(a||(a=[[0,pw_sy],[e.width,pw_sy],[e.width,e.height+pw_sy],[0,e.height+pw_sy]],i=[[0,pw_sy],[t.width,pw_sy],[t.width,t.height+pw_sy],[0,t.height+pw_sy]]),e.visible&&t.visible){var r=e.localToGlobal(a[0][0],a[0][1]),n=e.localToGlobal(a[1][0],a[1][1]),h=e.localToGlobal(a[2][0],a[2][1]),g=e.localToGlobal(a[3][0],a[3][1]),o=t.localToGlobal(i[0][0],i[0][1]),s=t.localToGlobal(i[1][0],i[1][1]),l=t.localToGlobal(i[2][0],i[2][1]),d=t.localToGlobal(i[3][0],i[3][1]);T(e,3381555,[r,n,h,g]),T(t,16711680,[o,s,l,d]);for(var c=[r,n,h,g],p=[o,s,l,d],u=0;u<c.length;u++){var v=u+1;u==c.length-1&&(v=0);for(var m=0;m<p.length;m++){var y=m+1;m==p.length-1&&(y=0);var x=w(c[u],c[v],p[m],p[y]);if(x)return!0}}}return!1}function c(e,t,a,i){if(!e.visible||!t.visible)return!1;var r,n,h=e.getBounds(),g=t.getBounds();return r=a?a:[0,0,-0,-0],n=i?i:[0,0,-0,-0],h.x=e.x-e.anchorOffsetX*e.scaleX+r[0],h.y=e.y-e.anchorOffsetY*e.scaleY+r[1],h.width=h.width*e.scaleX+r[2],h.height=h.height*e.scaleY+r[3],g.x=t.x-t.anchorOffsetX*t.scaleX+n[0],g.y=t.y-t.anchorOffsetY*t.scaleY+n[1],g.width=g.width*t.scaleX+n[2],g.height=g.height*t.scaleY+n[3],h.intersects(g)}function p(t,a,i,r){if(!t.visible||!a.visible)return!1;var n,h,g=t.getBounds(),o=a.getBounds();return n=i?i:[0,0,e.GetWidth(t),e.GetHeight(t)],h=r?r:[0,0,e.GetWidth(a),e.GetHeight(a)],g.x=t.x-t.anchorOffsetX*t.scaleX+n[0],g.y=t.y-t.anchorOffsetY*t.scaleY+n[1],g.width=n[2],g.height=n[3],o.x=a.x-a.anchorOffsetX*a.scaleX+h[0],o.y=a.y-a.anchorOffsetY*a.scaleY+h[1],o.width=h[2],o.height=h[3],g.intersects(o)}function u(t,a,i,r){if(!t.visible||!a.visible)return!1;var n,h,g=t.getBounds(),o=a.getBounds();return n=i?i:[t.x-t.anchorOffsetX*t.scaleX,t.y-t.anchorOffsetY*t.scaleY,e.GetWidth(t),e.GetHeight(t)],r?h=r:(h=[0,0,e.GetWidth(a),e.GetHeight(a)],h=[a.x-a.anchorOffsetX*a.scaleX,a.y-a.anchorOffsetY*a.scaleY,e.GetWidth(a),e.GetHeight(a)]),g.x=n[0],g.y=n[1],g.width=n[2],g.height=n[3],o.x=h[0],o.y=h[1],o.width=h[2],o.height=h[3],g.intersects(o)}function v(t,a){var i=new egret.Point(t.x,t.y);return i.x>=a.x-a.anchorOffsetX*a.scaleX&&i.x<=a.x-a.anchorOffsetX*a.scaleX+e.GetWidth(a)&&i.y>=a.y-a.anchorOffsetY*a.scaleY&&i.y<=a.y-a.anchorOffsetY*a.scaleY+e.GetHeight(a)?!0:!1}function m(e,t,a){if(a||(a=[[0,0],[t.width,0],[t.width,t.height],[0,t.height]]),t.visible){for(var i=t.localToGlobal(a[0][0],a[0][1]),r=t.localToGlobal(a[1][0],a[1][1]),n=t.localToGlobal(a[2][0],a[2][1]),h=t.localToGlobal(a[3][0],a[3][1]),g=0,o=[i,r,n,h],s=0;s<o.length;s++){var l=s+1;s==o.length-1&&(l=0),w(o[s],o[l],e,{x:0,y:gh})&&g++}if(g%2==1)return!0}return!1}function y(e,t,a){function i(e,t,a){return(t.x-e.x)*(a.y-e.y)-(a.x-e.x)*(t.y-e.y)}function r(e,t,a,r,n){return i(t,a,e)*i(r,n,e)>=0&&i(a,r,e)*i(n,t,e)>=0}if(a||(a=[[0,0],[t.width,0],[t.width,t.height],[0,t.height]]),t.visible){var n=t.localToGlobal(a[0][0],a[0][1]),h=t.localToGlobal(a[1][0],a[1][1]),g=t.localToGlobal(a[2][0],a[2][1]),o=t.localToGlobal(a[3][0],a[3][1]);if(r(e,n,h,g,o))return!0}return!1}function w(e,t,a,i){var r=(e.x-a.x)*(t.y-a.y)-(e.y-a.y)*(t.x-a.x),n=(e.x-i.x)*(t.y-i.y)-(e.y-i.y)*(t.x-i.x);if(r*n>=0)return!1;var h=(a.x-e.x)*(i.y-e.y)-(a.y-e.y)*(i.x-e.x),g=h+r-n;if(h*g>=0)return!1;var o=h/(n-r),s=o*(t.x-e.x),l=o*(t.y-e.y);return{x:e.x+s,y:e.y+l}}function T(t,a,i){if(!(t.debugShape instanceof egret.Shape))if(t.debugShape_onclear){var r=t.debugShape_onclear;t.debugShape=r,t.debugShape_onclear="",E.push(t)}else{var n=new egret.Shape;GameLayer.addChild(n),t.debugShape=n,E.push(t),t.once(egret.Event.REMOVED_FROM_STAGE,function(){n.graphics.clear(),e.LremoveChild(n),t.debugShape=""},t)}var h=t.debugShape;if(h.graphics.clear(),t.visible&&t.parent){h.graphics.lineStyle(2,a),h.graphics.moveTo(i[0].x,i[0].y+pw_sy);for(var g=1;g<i.length;g++)h.graphics.lineTo(i[g].x,i[g].y+pw_sy);h.graphics.lineTo(i[0].x,i[0].y+pw_sy)}}function x(){for(var e=0;e<E.length;e++){var t=E[e].debugShape;E[e].debugShape_onclear=t,E[e].debugShape="",t instanceof egret.Shape&&t.graphics.clear()}E=[]}function f(e,t){if(!(e.debugShape instanceof egret.Shape))if(e.debugShape_onclear){var a=e.debugShape_onclear;e.debugShape=a,e.debugShape_onclear="",E.push(e)}else{var i=new egret.Shape;GameLayer.addChild(i),e.debugShape=i,E.push(e)}var r=e.debugShape;r.graphics.clear(),r.graphics.beginFill(t),r.graphics.drawCircle(e.x,e.y,2.5),r.graphics.endFill()}e.satHitTest1=t,e.PolyVsPoly=a,e.AABBvsAABB=i,e.CheckCollide=r,e.IsOverlap=n,e.Minus=h,e.Normal=g,e.Dot=o,e.Vector=s,e.LHitTestObject=l,e.LHitTestObject2=d,e.LHitTest=c,e.LHittestShape=p,e.LHittestShape2=u,e.LHitTestPoint=v,e.LHitTestPoint2=m,e.LHitTestPoint3=y,e.segmentsIntr=w,e.debugDrawshape=T;var E=[];e.clearShape=x,e.drawPoint=f}(Lgs||(Lgs={}));var Lgs;!function(e){function t(t,a,i,r,n){if(r||(r=[[0,0],[t.width,0],[t.width,t.height],[0,t.height]],n=[[0,0],[a.width,0],[a.width,a.height],[0,a.height]]),t.visible&&a.visible){var h=t.localToGlobal(r[0][0],r[0][1]),g=t.localToGlobal(r[1][0],r[1][1]),o=t.localToGlobal(r[2][0],r[2][1]),s=t.localToGlobal(r[3][0],r[3][1]),l=a.localToGlobal(n[0][0],n[0][1]),d=a.localToGlobal(n[1][0],n[1][1]),c=a.localToGlobal(n[2][0],n[2][1]),p=a.localToGlobal(n[3][0],n[3][1]);e.debugDrawshape(t,3381555,[h,g,o,s]),e.debugDrawshape(a,16711680,[l,d,c,p])}}e.satHitTest2=t;var a=function(e){function t(){var t=e.call(this)||this;return t.once(egret.Event.ADDED_TO_STAGE,t.onAddToStage,t),t.once(egret.Event.REMOVED_FROM_STAGE,t.removedFun,t),t}return __extends(t,e),t.prototype.onAddToStage=function(){},t.prototype.hitTest=function(){},t.prototype.removedFun=function(){},t}(egret.DisplayObjectContainer);e.LHitShape233=a,__reflect(a.prototype,"Lgs.LHitShape233")}(Lgs||(Lgs={}));var Main=function(e){function t(){var t=e.call(this)||this;return t.addEventListener(egret.Event.ADDED_TO_STAGE,t.onAddToStage,t),t}return __extends(t,e),t.prototype.onAddToStage=function(e){$gameStage=this.stage,Lgs.addQR(0,.679,"12%",!1);var t=new egret.Sprite;this.stage.addChild(t),GameLayer=new egret.Sprite,this.stage.addChild(GameLayer),GameLayer.width=gw,GameLayer.height=gh,GameLayer.x=dw/2-gw/2,GameLayer.y=dh/2-gh/2,this.loadingView=new Lgs.loadUI,GameLayer.addChild(this.loadingView),RES.addEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.MyLoadGroups,this),egret.ImageLoader.crossOrigin="anonymous",RES.loadConfig($staticUrl+"resource/default.res.json",$staticUrl+"resource/")},t.prototype.MyLoadGroups=function(e){RES.removeEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.MyLoadGroups,this),this.loadGroupArr=["loadUI","preload"],this.loadTextArr=["",""],this.loadTimes=0,this.onConfigComplete(e)},t.prototype.onConfigComplete=function(e){RES.addEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),RES.addEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onResourceLoadError,this),RES.addEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onResourceProgress,this),RES.addEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,this.onItemLoadError,this);var t="loadUI";t=this.loadGroupArr[this.loadTimes],RES.loadGroup(t)},t.prototype.onResourceLoadComplete=function(e){function t(){var e=this;$.ajax({type:"GET",url:$staticUrl+"images/res.json",dataType:"json",cache:!1,success:function(t){var a=0;this.loadingView,e.loadRes.call(e,t.index,a,function(t){Lgs.LremoveChild(e.loadingView),Res_ok=!0,e.createGameScene()})}})}"loadUI"==e.groupName&&(this.loadingView.createLoading(),loadingScreen=new Lgs.LScreen,this.stage.addChild(loadingScreen),Lgs.hideloading()),e.groupName==this.loadGroupArr[this.loadTimes]&&(this.loadTimes++,console.log(this.loadTimes),RES.removeEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),RES.removeEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onResourceLoadError,this),RES.removeEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onResourceProgress,this),RES.removeEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,this.onItemLoadError,this),this.loadTimes<this.loadGroupArr.length?this.onConfigComplete(e):(Lgs.showloading(),Lgs.getWxUserInfoAjax(function(e){Lgs.hideloading(),matchImgs=e.matchImgs,$(".swiper-container-s2 img").attr("src",matchImgs[0]),$nickName=e.nickName,$headImg=e.headImg,$cid=parseInt(e.cid),openGame1=e.firstgame,t.call(this)},function(e){Lgs.hideloading(),Lgs.LMsg(e.msg)},this)))},t.prototype.loadRes=function(e,t,a){function i(){r.loadingView.setProgress(t+1+r.loadingView.total,r.loadingView.total,"正在加载音效..."),t<e.length-1?r.loadRes.call(r,e,t+1,a):t==e.length-1&&a&&a.call(r,t)}var r=this;if("image"==e[t].type){var n=new Image;n.src=e[t].src,n.onload=function(){i.call(r)},n.onerror=function(){alert("文件"+e[t]+"加载失败")}}else if("audio"==e[t].type){var h=new Audio;h.src=e[t].src,h.onloadedmetadata=function(){i.call(r)},h.onerror=function(){alert("文件"+e[t]+"加载失败")}}},t.prototype.onItemLoadError=function(e){console.warn("Url:"+e.resItem.url+" has failed to load")},t.prototype.onResourceLoadError=function(e){console.warn("Group:"+e.groupName+" has failed to load"),this.onResourceLoadComplete(e)},t.prototype.onResourceProgress=function(e){e.groupName==this.loadGroupArr[this.loadTimes]&&this.loadingView.setProgress(e.itemsLoaded,e.itemsTotal,this.loadTextArr[this.loadTimes])},t.prototype.createGameScene=function(){egret.MainContext.instance.stage.maxTouches=1,bgmViewer=new Lgs.LBgm,this.stage.addChild(bgmViewer);var e=new Lgs.LHomePage;GameLayer.addChild(e),this.stage.setChildIndex(loadingScreen,this.stage.numChildren),this.stage.addEventListener(egret.Event.ACTIVATE,function(){"pause"!=egret.localStorage.getItem(localbgmStr)&&bgmViewer.play()},this),this.stage.addEventListener(egret.Event.DEACTIVATE,function(){bgmViewer.pause()},this)},t.prototype.createBitmapByName=function(e){var t=new egret.Bitmap,a=RES.getRes(e);return t.texture=a,t},t}(egret.DisplayObjectContainer);__reflect(Main.prototype,"Main");